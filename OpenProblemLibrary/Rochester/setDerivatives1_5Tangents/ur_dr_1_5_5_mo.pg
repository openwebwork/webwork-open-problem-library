##DESCRIPTION
##KEYWORDS('derivatives', 'tangent line')
##  Find the derivatives of a polynomial evaluated at a point, use that to
##  find the equation of the tangent line of the curve at that point
##ENDDESCRIPTION

##KEYWORDS('Derivatives')
##Tagged by ynw2d

##DBsubject('Calculus')
##DBchapter('Limits and Derivatives')
##DBsection('Tangents, Velocities, and Other Rates of Change')
## TitleText1('Calculus: Early Transcendentals')
## EditionText1('1')
## AuthorText1('Rogawski')
## Section1('3.1')
## Problem1('35')


# NOTE: This original problem implemented a "!" contsruction.
#				This math object version omitted the "!" .




DOCUMENT();        # This should be the first executable line in the problem.

loadMacros(
"PGstandard.pl",
"MathObjects.pl",										 		 #Math Object Macro	
"parserImplicitPlane.pl",								 # Macro for student's answer to be in the form y = mx + b
"PGcourse.pl"
);


########################################
# Setup
TEXT(beginproblem());
$showPartialCorrectAnswers = 1;

Context("Numeric");

$a1 = random(2,5,1);
$b1 = random(2,3,1);
$x1 = random(4,5,1);	

$m1 = (-$a1)/($x1-$b1)**2;

$f = Formula("$a1 / (x - $b1)");				# Replaces y above
$fx = $f->eval(x=>$x1);
$neg_fx = -$fx;

$df = $f->D;
$dfx = $df->eval(x=>$x1);

$y_intercept = $neg_fx - $dfx*$x1;

Context("ImplicitPlane");
$h = ImplicitPlane("y = $dfx*x + $y_intercept")->with(correct_ans=>"y = $dfx*x + $y_intercept");     

# Now the student must enter the RHS of the equation as their answer; this eliminates
# the need for three answer blanks (now we can just use 2).

##############################
# Main Text

Context()->texStrings;
BEGIN_TEXT
Suppose \( f(x) = $f \),
$PAR
\( f'( $x1 ) = \) \{ans_rule(20) \}
$PAR
Use this to find the equation of the tangent line to the curve  \( y =  $f \) at the point \( ( $x1 , {-$fx:%0.5f} ) \). 
Write you answer in the form \( y = mx + b \), where  \( m \)  is the slope and  \( b \)  is the y-intercept 
$PAR
\{ans_rule(40)\}.

END_TEXT
Context()->normalStrings;

##############################
# Answers

ANS($dfx->cmp);
ANS($h->cmp);

##############################


COMMENT('MathObject version');

COMMENT('MathObject version');
ENDDOCUMENT();