##DESCRIPTION
## DBsubject(Statistics)
## DBchapter(Exploratory data analysis/descriptive statistics)
## DBsection(Graphical representations)
## Institution(NAU)
## Author(Edgar Fisher)
## Level(2)
## KEYWORDS('boxplot', 'five number summary')
##ENDDESCRIPTION

# File Created: 6/6/05
# Location: Northern Arizona University

DOCUMENT();
loadMacros('PGstandard.pl', 'PGML.pl', 'PGtikz.pl', 'PGcourse.pl',);

push @dat, random(15, 30), random(35, 43), random(45, 70), random(72, 85),
    random(89, 100);

@slice = num_sort(random_subset(3, 0 .. 4));

@labels = ('Minimum', 'First quartile', 'Median', 'Third quartile', 'Maximum');
@questions = @labels[@slice];

$min    = Compute($dat[ $slice[0] ]);
$median = Compute($dat[ $slice[1] ]);
$max    = Compute($dat[ $slice[2] ]);

# helpful for the graph

$xmin   = floor($dat[0] / 10) * 10 - 10;
$xmax   = ceil($dat[4] / 10) * 10 + 10;
$xmid   = 0.5 * ($xmin + $xmax);
$xmin10 = $xmin + 10;
$xmin20 = $xmin + 20;
$xmax10 = $xmax - 10;

$graph_image = createTikZImage();
$graph_image->tikzOptions('xscale=0.15');

$graph_image->BEGIN_TIKZ
\filldraw[
    draw=LightBlue,
    fill=white,
    rounded corners=10pt,
    thick,use as bounding box
] ({$xmin-3},-0.5) rectangle ({$xmax+3},5);
\draw[<->,thick] ($xmin,0) rectangle ($xmax,4);
\draw ($xmin,1) -- ($xmax,1);
\foreach \x in {$xmin10,$xmin20,...,$xmax10} \draw (\x,1)--(\x,0.75) node[below] {\x};
\draw ($dat[0],2.5) -- ($dat[1],2.5);
\filldraw[black,fill=blue!20] ($dat[1],2) rectangle($dat[3],3);
\draw ($dat[2],2) -- ($dat[2],3);
\draw ($dat[3],2.5) -- ($dat[4],2.5);

\draw[thick] ($dat[$slice[0]],1) -- ($dat[$slice[0]],1.2) node [above] {$dat[$slice[0]]};
\draw[thick] ($dat[$slice[1]],1) -- ($dat[$slice[1]],1.2) node [above] {$dat[$slice[1]]};
\draw[thick] ($dat[$slice[2]],1) -- ($dat[$slice[2]],1.2) node [above] {$dat[$slice[2]]};
\draw[thick] ($dat[$slice[3]],1) -- ($dat[$slice[3]],1.2) node [above] {$dat[$slice[3]]};
\draw[thick] ($dat[$slice[4]],1) -- ($dat[$slice[4]],1.2) node [above] {$dat[$slice[4]]};

END_TIKZ

$alttext =
    "Box and whiskers plot.  The left whisker is from $dat[0] to $dat[1]. "
    . "The box is between $dat[1] and $dat[3]. The middle line is at $dat[2] "
    . "and the right whisker runs from $dat[3] to $dat[4]";

BEGIN_PGML

Consider the following box and whisker plot.  Find the indicated values of the
represented data.

>> [! [$alttext] !]{$graph_image}{600} <<

a) [$questions[0]]: [______]{$min}
b) [$questions[1]]: [______]{$median}
c) [$questions[2]]: [______]{$max}

END_PGML

BEGIN_PGML_SOLUTION
Looking at the plot,

a) Minimum is [$min]
b) Median is [$median]
c) Maximum is [$max]
END_PGML_SOLUTION
ENDDOCUMENT();
