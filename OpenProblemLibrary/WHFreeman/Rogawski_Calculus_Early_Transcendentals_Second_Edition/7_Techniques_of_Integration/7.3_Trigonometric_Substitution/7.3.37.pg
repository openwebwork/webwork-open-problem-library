## DBsubject('Calculus')
## DBchapter('Techniques of Integration')
## DBsection('Trigonometric Substitution')
## KEYWORDS('calculus', 'integration', 'integral', 'trigonometric substitution', 'substitution', 'trigonometry', 'trigonometric', 'trig')
## TitleText1('Calculus: Early Transcendentals')
## EditionText1('2')
## AuthorText1('Rogawski')
## Section1('7.3')
## Problem1('37')
## Author('Christopher Sira')
## Institution('W.H.Freeman')

DOCUMENT();
loadMacros("PG.pl","PGbasicmacros.pl","PGanswermacros.pl");
loadMacros("PGchoicemacros.pl");
loadMacros("Parser.pl");
loadMacros("freemanMacros.pl");
$context = Context();

$context->variables->add(C=>'Real');

#($a, $b, $ans) = @{ list_random([],
#                                []
#) };

$a = Real(random(2, 4, 1));
$a2 = $a**2;
$a3 = $a**3;
$a4 = $a**4;
$a5 = $a**5;

$b = $a2 + 4;

$ans = Formula("ln(abs(sqrt((x+2)**2 + $a2) + x + 2)) + C")->reduce();

Context()->texStrings;
BEGIN_TEXT
\{ beginproblem() \}
\{ textbook_ref_exact("Rogawski ET 2e", "7.3","37") \}
$PAR
Evaluate the integral \( \int \frac{dx}{\sqrt{x^2 + 4x + $b}} \) by completing the square and using trigonometric substitution.
$PAR
\{ans_rule()\}
$PAR
Note: Use C for an arbitrary constant, and be sure to absorb as much as possible into C.
$PAR
END_TEXT
Context()->normalStrings;

ANS($ans->cmp);

Context()->texStrings;
SOLUTION(EV3(<<'END_SOLUTION'));
$PAR
$SOL
$PAR
First complete the square:
$PAR
\( x^2 + 4x + $b = x^2 + 4x + 4 + $a2 = (x + 2)^2 + $a2 \).
$PAR
Let \( u = x + 2 \).  Then, \( du = dx \), and
$PAR
\( I = \int \frac{dx}{\sqrt{x^2 + 4x + $b}} = \int \frac{du}{\sqrt{u^2 + $a2}} \).
$PAR
Now let \( u = $a \tan t \).  Then \( du = $a \sec^2 t \, dt \), and
$PAR
\( u^2 + $a2 = $a2 \tan^2 t + $a2 = $a2 (\tan^2 t + 1) = $a2 \sec^2 t \).
$PAR
Thus,
$PAR
\( I = \int \frac{$a \sec^2 t \, dt}{$a \sec t} = \int \sec t \, dt = \ln{\left| \sec t + \tan t \right|} + C \).
$PAR
Since \( u = $a \tan t \), we construct a right triangle with \( \tan t = \frac{u}{$a} \).
$PAR
From that triangle, the Pythagorean theorem, and the definition of secant with respect to right triangles, we see that \( \sec t = \frac{\sqrt{u^2 + $a2}}{$a} \), so we have
$PAR
\( I = \ln{\left|\frac{\sqrt{u^2 + $a2}}{$a} + \frac{u}{$a}\right|} + C = \ln{\left|\sqrt{u^2 + $a2} + u\right|} + \ln{\frac{1}{3}} + C \)
$PAR
\( = \ln{\left|\sqrt{u^2 + $a2} + u\right|} + C = \ln{\left|\sqrt{(x + 2)^2 + $a2} + x + 2\right|} + C \)
$PAR
END_SOLUTION

ENDDOCUMENT();


