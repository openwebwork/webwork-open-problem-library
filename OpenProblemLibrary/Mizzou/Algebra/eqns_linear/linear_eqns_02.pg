# DESCRIPTION
# Solve a linear equation of the form a(x + b) = cx + d, where b,d are positive
# integers and a,c are possibly negative.
# ENDDESCRIPTION

## DBchapter('Equations and Inequalities');
## Author1('David Covert')
## Author2('Teri Christiansen')
## Author3('Rick Lynch')
## DBsubject(Algebra)
## DBchapter(Linear equations and functions)
## DBsection(Linear equations)
## Institution(University of Missouri-Columbia)
## Level(2)
## MO(1)
## Status(R)
## KEYWORDS('linear', 'equations')

## Updated 2025.02 by Peter Staab, switch to PGML and add solution

# initialization

DOCUMENT();
loadMacros('PGstandard.pl', 'PGML.pl', 'contextFraction.pl', 'PGcourse.pl');

Context("LimitedFraction")
    ->flags->set(showMixedNumbers => 0, allowMixedNumbers => 0);
Context()->strings->add(
    "no solutions"    => {},
    "infinitely many" => {},
    "no solution"     => { alias => "no solutions" },
    "none"            => { alias => "no solutions" },
    "all reals"       => { alias => "infinitely many" }
);
Context()->variables->are(x => "Real", X => "Real");

$a = random(-1, 1,  2) * random(2, 10);
$b = random( 2, 10);
do { $c = random(-1, 1) * random(2, 10) } until ($a * $c < 0);
$d = random(2, 10);

$eqn = "$a (x + $b) = $c x + $d";

$num    = $d - $a * $b;
$den    = $a - $c;
$x = Fraction($num, $den);

# state the problem

BEGIN_PGML
Solve the equation for [`x`]:

 [``` [$eqn] ```] 
[` x = `] [_]{$x}
END_PGML

$expl1 = ( $a*$b <0 ? 'Add ' : 'Subtract ') . abs($a*$b) . 
        ( $a*$b < 0 ? ' to ' : ' from ') . 'both sides.';

$expr2 = ($c < 0 ? 'Add ' : 'Subtract') . abs($c) . '\(x\)' .
    ( $c < 0 ? ' to ' : ' from ') . 'both sides.';

BEGIN_PGML_SOLUTION
[```
\begin{aligned}
[$a] (x + [$b]) & = [$c] x + [$d] \qquad \qquad \text{distribute the left side,}\\
[$a] x + [@ $a*$b @] & = [$c] x + [$d] \qquad\qquad\text{[$expl1]} \\
[$a] x & = [$c] x + [@$d-$a*$b @] \qquad \qquad\text{[$expr2]} \\
[@ $a-$c @] x & = [@ $d-$a*$b @] \qquad\qquad\text{Divide by [@ $a-$c @]} \\
x & = [$x]
\end{aligned}
```]
END_PGML_SOLUTION

COMMENT(
    'Desc: Solve a linear equation of the form a(x + b) = cx + d, where b,d are positive integers and a,c are possibly negative.'
);
ENDDOCUMENT();
