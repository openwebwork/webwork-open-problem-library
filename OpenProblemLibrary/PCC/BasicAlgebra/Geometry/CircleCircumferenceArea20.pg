# WeBWorK problem written by Carl Yao
# Portland Community College
#
# Given diameter, find the circumference and area of a circle.
#
# Last edited by Carl Yao on 7/17/13
#
# ENDDESCRIPTION

## DBsubject('Algebra')
## DBchapter('Basic Algebra')
## DBsection('Problem Solving with Equations')
## KEYWORDS('area','circumference','circle')
## DBCCSS('7.G.4')
## TitleText1('')
## EditionText1('')
## AuthorText1('')
## Section1('')
## Problem1('')
## Author('Alex Jordan, Carl Yao, Chris Hughes')
## Institution('PCC')

##############################################

DOCUMENT();

loadMacros(
  "PGstandard.pl",
  "MathObjects.pl",
  "PGML.pl",
  "parserNumberWithUnits.pl",
  "parserFormulaWithUnits.pl",
  "answerHints.pl",
  "PCCmacros.pl",
  "PGcourse.pl",
);

##############################################

Context("Numeric");

$radius = random(2,10,1);
$diameter = $radius*2;
$radiusSquared = $radius**2;

$radiusMO = NumberWithUnits("$radius m");
$diameterMO = NumberWithUnits("$diameter m");

$pi = Compute("pi");
$circumferceRounded = sprintf("%.2f", $diameter*$pi);
$circumferenceMO = NumberWithUnits("$circumferceRounded m");
$areaRounded = sprintf("%.2f", $pi*$radiusSquared );
$areaMO = NumberWithUnits("$areaRounded m^2");

Context()->constants->remove('pi');
Context()->variables->are(pi=>'Real');
Context()->variables->set(pi => {TeX=>'\pi'});

$circumferenceWithPiMO = FormulaWithUnits("$diameter pi" , 'm');
$areaWithPiMO = FormulaWithUnits("$radiusSquared pi", 'm^2');


##############################################

TEXT(beginproblem());

BEGIN_PGML

A circle's diameter is [`[$diameterMO]`].

a) This circle's circumference, in terms of [`\pi`], is [_]{width=>5}. [@KeyboardInstructions(q!(Type [|pi|]* for [`\pi`].)!)@]**

b) This circle's circumference, rounded to the hundredths place, is [_]{width=>5}.

c) This circle's area, in terms of [`\pi`], is [_]{width=>5}. [@KeyboardInstructions(q!(Type [|pi|]* for [`\pi`].)!)@]**

d) This circle's area, rounded to the hundredths place, is [_]{width=>5}. 

[@KeyboardInstructions(q!(Use [|m|]* for meters and [|m^2|]* for square meters.)!)@]**

END_PGML


ANS($circumferenceWithPiMO->cmp(
   correct_ans_latex_string=>$circumferenceWithPiMO->TeX
   )->
     withPostFilter(AnswerHints( 
     sub {
       my ($correct,$student,$ans) = @_;
       return (Formula($student)->isConstant);
     } => "Your answer should be in terms of pi",
))
);

ANS($circumferenceMO->cmp(tolType=>absolute,tolerance=>0.005));

ANS($areaWithPiMO->cmp(
     correct_ans_latex_string=>$areaWithPiMO->TeX)->
     withPostFilter(AnswerHints( 
     sub {
       my ($correct,$student,$ans) = @_;
       return (Formula($student)->isConstant);
     } => "Your answer should be in terms of pi",
))
);

ANS($areaMO->cmp(tolType=>absolute,tolerance=>0.005));


##############################################

BEGIN_PGML_SOLUTION

We use [`r`] to represent radius, and [`d`] to represent diameter.

In this problem, it's given that the diameter is [`[$diameterMO]`]. A circle's radius is half as long as its diameter, so the radius is [`[$radiusMO]`].

A circle's circumference formula is [` C= \pi d `] or [` C= 2 \pi r `] and a circle's area formula is [` A = \pi r^{2} `]. 

Throughout these computations, all quantities have units attached, and we only show them in the final step.

When you enter [`\pi`]'s value in a calculator, don't round it to [`3.14`]. Use the [`\pi`] button on your calculator instead. This way, your result is more accurate.

a)  For this problem the diameter is given, so we use the first formula for circumference:

    [```\begin{aligned}
      C & = \pi d\\\
        & = \pi \cdot [$diameter]\\
        & = [$circumferenceWithPiMO]
      \end{aligned}```]

    Don't forget the length unit [`\textrm{m}`].

b) [```\begin{aligned}[t]
      C& = [$diameter] \pi\\
       & \approx [$diameter] \cdot 3.1415926\ldots\\
       & \approx [$circumferenceMO]
     \end{aligned}```]

    Don't forget the length unit [`\textrm{m}`].
    
    

c) [```\begin{aligned}[t]
       A&= \pi r^{2}\\
         &= \pi \cdot [$radiusSquared]\\
         &= [$areaWithPiMO] 
        \end{aligned}```]

    Don't forget the area unit [`\textrm{m}^2`].

d) [```\begin{aligned}[t]
       A&= [$radiusSquared] \pi\\
        & \approx [$radiusSquared] \cdot 3.1415926\ldots\\
        & \approx [$areaMO]
       \end{aligned}```]

    Don't forget the area unit [`\textrm{m}^2`].

END_PGML_SOLUTION

ENDDOCUMENT();
