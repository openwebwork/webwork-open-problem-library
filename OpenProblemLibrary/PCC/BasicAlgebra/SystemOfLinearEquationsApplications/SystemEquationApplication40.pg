# WeBWorK problem written by Carl Yao
# Portland Community College
#
# System equation application problem.
#
# Last updated: Jordan 9/9/13; Yao 8/4/13
# ENDDESCRIPTION

## DBsubject('Algebra')
## DBchapter('Systems of Equations and Inequalities')
## DBsection('Systems of Linear Equations')
## KEYWORDS('solve','system','equation','application')
## DBCCSS('8.EE.8','A-CED.2')
## TitleText1('')
## EditionText1('')
## AuthorText1('')
## Section1('')
## Problem1('')
## Author('Alex Jordan, Carl Yao, Chris Hughes')
## Institution('PCC')

##############################################

DOCUMENT();

loadMacros(
  "PGstandard.pl",
  "MathObjects.pl",
  "PGML.pl",
  "PGcourse.pl",
);

##############################################

Context("Numeric");

do {

$s1 = random(1200,1400,200);
$p1 = 2*list_random((3,4,5,6));
$dp1 = $p1/100;
$pure1 = $s1*$dp1;

$s2 = random(2200,4000,200);
$p2 = 2*list_random((3,4,5,6));
while ($p2==$p1) {$p2 = 2*list_random((3,4,5,6));}
$dp2 = $p2/100;
$pure2 = $s2*$dp2;

$s3 = $s1+$s2;
$pure3 = $pure1+$pure2;
$dp3 = $pure3/$s3;
$p3 = $dp3*100;

} while (int($dp3*10000)!=($dp3*10000));

$ethnicity = list_random("Asians", "native Americans", "African Americans", "Hispanics", "whites");

##############################################
TEXT(beginproblem());
BEGIN_PGML

Town A and Town B were located close to each other, and recently merged into one city. Town A had a population with [`[$p1]%`] [$ethnicity]. Town B had a population with [`[$p2]%`] [$ethnicity]. After the merge, the new city has a total of [`[$s3]`] residents, with [`[$p3]%`] [$ethnicity]. Write and solve a system of equations to find how many residents Town A and Town B used to have.

    Town A used to have [__________]{$s1} residents, and Town B used to have [__________]{$s2} residents.

END_PGML

##############################################

$step1 = -$dp1*$s3;
$step2 = $dp2-$dp1;
$step3 = $dp3*$s3;
$step4 = $step1 + $step3;

if ($step2!=1) {
   $output = " $step2 y &= $step4 \\".
             " \frac{$step2 y}{$step2} &= \frac{$step4}{$step2} \\";
}
else {$output = "";}

BEGIN_PGML_SOLUTION

Assume Town A used to have [`x`] residents, and Town B used to have [`y`] residents.

It's given that the merged city has [`[$s3]`] residents, so we have:

    [`` x+y=[$s3] ``]

Since Town A used to have [`[$p1]%`]  [$ethnicity] out of [`x`] residents, the number of [$ethnicity] in Town A was [`[$dp1]x`].

Similarly, since Town B used to have [`[$p2]%`] [$ethnicity] out of [`y`] residents, the number of [$ethnicity] in Town B was [`[$dp2]y`].

After the merge, the new city has [`[$p3]%`] [$ethnicity] out of [`[$s3]`] residents, so the number of [$ethnicity] in the new city was [`[$dp3] \cdot [$s3] = [$step3] `]. Now we can write another equation:

    [`` [$dp1]x+[$dp2]y= [$step3] ``]

Now we have a system of equations:

    [``\left\{\begin{aligned}
  x              + y             &= [$s3] \\
  [$dp1]x+[$dp2]y &= [$step3]
\end{aligned}\right.``]

We use elimination to solve this system of equations. To eliminate [`x`], we multiply each side of [` x + y = [$s3] `] by [`-[$dp1]`], and we have:

    [``\left\{\begin{aligned}
  -[$dp1]x -[$dp1]y  &= [$step1] \\
  [$dp1]x+[$dp2]y &= [$step3]
\end{aligned}\right.``]

Adding left sides together, and right sides together, and then solving for [`y`], we have:

    [``
\begin{aligned}[t]
  [$output]
  y   &= [$s2]
\end{aligned}
    ``]

Substitute [`y=[$s2]`] into [` x+y=[$s3] `], and we find [`x=[$s1]`].

The solution to the system of equations is [`([$s1],[$s2])`]. This implies Town A used to have [`[$s1]`] residents, and Town B used to have [`[$s2]`] residents.

END_PGML_SOLUTION

ENDDOCUMENT();

