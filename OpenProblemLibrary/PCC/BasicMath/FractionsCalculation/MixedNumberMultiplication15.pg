# WeBWorK problem written by Carl Yao
# Portland Community College
#
# Multiply two mixed numbers. Both numbers are negative.
#
# Last edited: Carl Yao 9/26/2013
#
# ENDDESCRIPTION

## DBsubject('Middle School')
## DBchapter('Fractions')
## DBsection('')
## KEYWORDS('multiply','mixed number')
## DBCCSS('6.NS.1')
## TitleText1('')
## EditionText1('')
## AuthorText1('')
## Section1('')
## Problem1('')
## Author('Carl Yao')
## Institution('PCC')

##############################################

DOCUMENT();

loadMacros(
  "PGstandard.pl",
  "MathObjects.pl",
  "PGML.pl",
  "contextFraction.pl",
  "PGcourse.pl",
);

##############################################

Context("LimitedFraction");
Context()->flags->set(requirePureFractions=>0);
Context()->flags->set(showMixedNumbers=>1);

@primes = (2, 3, 5, 7);
@multiples = (2,3,4,5,6);

do {

#Create two mixed numbers. Make sure some reductions will happen.
$den1Reduced = list_random(@primes);
$den2Reduced = list_random(@primes);

#$multiple1 goes into $num1 and $den2; $multiple2 goes into $num2 and $den1.
$multiple1=list_random(@multiples);
do {$multiple2=list_random(@multiples);} until ($multiple1!=$multiple2);

$den1 = $den1Reduced*$multiple2;
$den2 = $den2Reduced*$multiple1;

$num1 = $multiple1*random(2,10,1);
$num2 = $multiple2*random(2,10,1);

} until ( ($num1>$den1) && (gcd($num1,$den1)==1) && ($num2>$den2) && (gcd($num2,$den2)==1) );

$frac1 = Fraction($num1,$den1);
$frac2 = Fraction($num2,$den2);

$ans = ($frac1 * $frac2)->reduce;
@ans = $ans->value;
$ansNum = $ans[0];
$ansDen = $ans[1];

##############################################

TEXT(beginproblem());

BEGIN_PGML
Multiply the following: [``\left( -[$frac1] \right) \cdot \left( -[$frac2] \right) ``]

    [___________]{$ans} 

END_PGML

##############################################

$div1 = gcd($num1,$den2);
$div2 = gcd($num2,$den1);

$output1 = $ansDen==1 ? "$ans" : "\frac{$ansNum}{$ansDen}";
$output2 = $ansDen!=1 ? "If we like, we may convert this answer to a mixed number since the original factors were mixed numbers. " : "";

##############################################

BEGIN_PGML_SOLUTION

When we do fraction multiplication or division, if negative numbers are involved, it helps to first determine the sign (positive or negative) of the solution. This way, when we carry out the fraction operation, we don't have to think about signs.

In this problem, we have:

    [`` \text{negative number} \cdot \text{negative number} = \text{positive number} ``]

Now we know the result must be positive, so we can simply throw away those two negative signs, and the problem becomes:

    [`` [$frac1] \cdot [$frac2] ``]

We first change both mixed numbers to improper fractions. In this case, the problem becomes

    [``\frac{[$num1]}{[$den1]} \cdot \frac{[$num2]}{[$den2]}``]

Then we do fraction multiplication as usual. To avoid dealing with big numbers, we reduce fractions before doing multiplications. The full calculation is:

    [``
\begin{aligned}[t]
   \left( -[$frac1] \right) \cdot \left( -[$frac2] \right)
      &= [$frac1] \cdot [$frac2] \\
      &= \frac{[$num1]}{[$den1]} \cdot \frac{[$num2]}{[$den2]} \\
      &= \frac{[$num1/$div1]}{[$den1/$div2]} \cdot \frac{[$num2/$div2]}{[$den2/$div1]} \\
      &= [$output1]
\end{aligned}
    ``]

[$output2] The result is [`[$ans]`].

END_PGML_SOLUTION

ENDDOCUMENT();


