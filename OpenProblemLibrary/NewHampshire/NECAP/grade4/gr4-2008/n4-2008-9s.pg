## DBsubject(Statistics)
## DBchapter(Exploratory data analysis/descriptive statistics)
## DBsection(Graphical representations)
## MLT(Statistics_Exploratory_EarlyHistograms)
## Level(2)

## Updated 2025.02 by Peter Staab, switch to PGML and the graph to tikz.

DOCUMENT();
loadMacros(
    'PGstandard.pl', 'PGML.pl',
    'PGtikz.pl',     'randomPerson.pl',
    'PGcourse.pl'
);

# make sure we're in the context we want
Context("Numeric");

do {
    @w     = map { random(4, 10) } (0 .. 3);
    $total = $w[0] + $w[1] + $w[2] + $w[3];
} until (22 <= $total && $total <= 28);

$graph2 = createTikZImage();
$graph2->tikzLibraries('arrows.meta');
$graph2->BEGIN_TIKZ
\tikzset{>={Stealth[scale = 1.5]}}
\filldraw[
    draw = LightBlue,
    fill = white,
    rounded corners = 10pt,
    thick,
    use as bounding box
] (-2, -1.5) rectangle (13.5, 10.5);

\draw[->, thick] (0, 0) -- (12.5, 0);

\foreach \y/\label in {2/Blue,4/Red,6/Green,8/Yellow}
    \draw(0,\y)--(-0.25,\y) node [left] {\label};
\draw[-, thick] (0, 0) -- (0, 9.5);
\foreach \x in {1,...,12}
    \draw (\x, 5pt) -- (\x, -5pt) node[below] {\(\x\)};

\filldraw[fill=Blue, draw=black] (0,1.5) rectangle ( $w[0], 2.5);
\filldraw[fill=Red, draw=black] (0,3.5) rectangle ( $w[1], 4.5);
\filldraw[fill=Green, draw=black] (0,5.5) rectangle ( $w[2], 6.5);
\filldraw[fill=Yellow, draw=black] (0,7.5) rectangle ( $w[3], 8.5);

\draw (6,9.5) node {Favorite Colors};
\draw (6,-1) node {Number of Students};

END_TIKZ

$last_name = randomLastName();

BEGIN_PGML
This bar graph shows the favorite colors of students in Ms [$last_name]'s class. Each student voted for only one color.

>>[! !]{$graph2}{500}<<

How many students voted Ms. [$last_name]'s class?  [_]{$total}

END_PGML

BEGIN_PGML_SOLUTION
In this case, the total number of students is what we are looking for.  There are [$total] students in total. 
END_PGML_SOLUTION

ENDDOCUMENT();
