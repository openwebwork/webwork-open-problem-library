## DESCRIPTION
## DBsubject(Statistics)
## DBchapter(Exploratory data analysis/descriptive statistics)
## DBsection(Graphical representations)
## Institution(The College of Idaho)
## Author(R Cruz, L Danielson, J Guild)
## Level(1)
## TitleText1('The Basic Practice of Statistics')
## AuthorText1('David Moore')
## EditionText1('5e')
## Section1('1')
## Problem1('')
## KEYWORDS('statistics', 'quantitative data', 'categorical data', 'histogram')

DOCUMENT();    # This should be the first executable line in the problem.

loadMacros(
    'PGstandard.pl',         'PGML.pl',
    'parserRadioButtons.pl', 'PGtikz.pl',
    'PGcourse.pl'
);

#  Setup

# Create a distribution to more easily answer the questions below
do {
    @y     = map { random(50 - 15 * $_, 60 - 15 * $_) } (0 .. 3);
    $y[$_] = random(0, 1) * random(0, 3) for (4 .. 9);
    $y[10] = random(1, 2);
    $total = 0;
    $total += $_ for @y;
    $over30 = 0;
    $over30 += $y[$_] for (3 .. 10);
} until ($over30 / $total > 0.08 && $over30 / $total < 0.12);

# create the tikz code to make the bars for this.
$bars = '';
for $i (0 .. $#y) {
    $bars .=
        "\filldraw[fill=LightBlue, draw = black] ({10*$i/12},0) rectangle ({(10*($i+1))/12}, {$y[$i]/7}); \n";
}

$graph = createTikZImage();
$graph->tikzLibraries('arrows.meta');
$graph->tikzOptions('yscale = 0.6');
$graph->BEGIN_TIKZ
\tikzset{>={Stealth[scale=1.25]}}
\filldraw[
    draw=LightBlue,
    fill=white,
    rounded corners=10pt,
    thick, use as bounding box
] (-1.25,-1) rectangle (10,10);
\foreach \y in {5,10,...,60} 
    \draw[lightgray] (-0.5,{\y/7}) -- ({115/12},{\y/7});
\draw (-0.5,0) -- (9.5,0) -- (9.5,9.5)-- (-0.5, 9.5) --cycle; 
\foreach \x in {0,10,...,110}
    \draw({\x/12},5pt) -- ({\x/12},-5pt) node [below] {\(\x\)};

%\foreach \y in {1,...,20} \draw[thin, lightgray] (0,{\y/2.5}) -- (9.5,{\y/2.5});
\foreach \y in {10,20,...,60}
    \draw (-0.4,{\y/7}) -- (-0.6,{\y/7}) node[left] {\(\y\)};
$bars

END_TIKZ

$rb2 = RadioButtons(
    [ 'symmetric', 'skewed right', 'skewed left', 'none of the above' ], 1);

$rb3 = RadioButtons(
    [
        "above 30$PERCENT",
        "between 20$PERCENT and 30$PERCENT",
        "about 10$PERCENT",
        "less than 3$PERCENT"
    ],
    2
);

$showPartialCorrectAnswers = 0;

BEGIN_PGML
In a statistics class with [$total] students, the professor records how much money
each student has in their possession during the first class of the semester.
The histogram below is of the data collected.


[! alt text !]{$graph}{450}

a) The number of students with under $10 in their possession is [_]{$y[0]}{5}

b) The histogram is 

    [_]{$rb2}

c) The percentage of students with over $30 in their possession is

    [_]{$rb3}
END_PGML

BEGIN_PGML_SOLUTION
For this, read off the approximate bar heights to answer the questions. 

a) This needs a careful eye, but the answer is [$y[0]]. 

b) Because there is a large peak on the left and a long tail to the right, this is _skewed right_. 

c) For this, total all of the heights of the bars.  The total heights of those over $30 is [$over30] and since there are [$total] students, this is about 10%. 
END_PGML_SOLUTION

ENDDOCUMENT();       # This should be the last executable line in the problem.
