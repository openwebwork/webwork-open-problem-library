## DESCRIPTION
## DBsubject(Statistics)
## DBchapter(Exploratory data analysis/descriptive statistics)
## DBsection(Graphical representations)
## Institution(The College of Idaho)
## Author(R Cruz, L Danielson, J Guild)
## Level(2)
## MO(1)
## TitleText1('The Basic Practice of Statistics')
## AuthorText1('David Moore')
## EditionText1('5e')
## Section1('2')
## Problem1('')
## KEYWORDS('statistics', 'boxplot')

DOCUMENT();    # This should be the first executable line in the problem.

loadMacros(
    'PGstandard.pl',         'PGML.pl',
    'parserRadioButtons.pl', 'PGtikz.pl',
    'PGcourse.pl',           'answerHints.pl'
);

#  Setup

$n      = random(6, 24);
$number = 4 * $n;

$median = random(20, 40);
$Q1     = $median - random(4, 8);
$Q3     = $median + random(4, 8);
$min    = $Q1 - random(3, 6);
$max    = $Q3 + random(3, 6);

# randomly determine the shading.

$opt = random(1, 6);
if ($opt == 1) {
    $scores    = $n;
    $shadeline = "\draw[ultra thick, blue!50] ($min, 3) -- ($Q1,3);";
    $shadebox  = "";
} elsif ($opt == 2) {
    $scores    = $n;
    $shadeline = "";
    $shadebox  = "\fill[blue!50] ($Q1,2) rectangle ($median,4);";
} elsif ($opt == 3) {
    $scores    = $n;
    $shadeline = "";
    $shadebox  = "\fill[blue!50] ($median,2) rectangle ($Q3,4);";
} elsif ($opt == 4) {
    $scores    = $n;
    $shadeline = "\draw[ultra thick, blue!50] ($Q3,3) -- ($max,3);";
    $shadebox  = "";
} elsif ($opt == 5) {
    $scores    = 2 * $n;
    $shadeline = "\draw[ultra thick, blue!50] ($min, 3) -- ($Q1,3);";
    $shadebox  = "\fill[blue!50] ($Q1,2) rectangle ($median,4);";
} elsif ($opt == 6) {
    $scores    = 2 * $n;
    $shadeline = "";
    $shadebox  = "\fill[blue!50] ($Q1,2) rectangle ($Q3,4);";
} elsif ($opt == 7) {
    $scores    = 2 * $n;
    $shadeline = "";
    $shadebox  = "\fill[blue!50] ($Q1,2) rectangle ($Q3,4);";
}

($xmin, $xmax) = (5 * int($min / 5), 5 * int($max / 5 + 1));
$xmin5 = $xmin + 5;

$graph = createTikZImage();
$graph->tikzOptions("xscale=0.5");

$graph->BEGIN_TIKZ
\filldraw[
    draw=LightBlue,
    fill=white,
    rounded corners=10pt,
    thick,use as bounding box
] ({$xmin-4},-0.5) rectangle ({$xmax+4},6);
\draw[<->,thick] ({$xmin-3},0) rectangle ({$xmax+3},5);
\draw ({$xmin-3},1) -- ({$xmax+3},1);
\foreach \x in {$xmin,$xmin5,...,$xmax} \draw (\x,1)--(\x,0.75) node[below] {\x};
$shadebox;
\draw ($min,3) -- ($Q1,3);
\draw ($Q1,2) rectangle($Q3,4);

\draw ($Q3,3) -- ($max,3);
$shadeline;
$shadebox;
\draw ($median,2) -- ($median,4);
END_TIKZ

$alttext =
    "alt='Box and whiskers plot for salaries listed in thousands of "
    . "dollars.  The left whisker is from $min to $Q1.  The box is "
    . "between $Q1 and $Q3. The middle line is at $median and the "
    . "right whisker runs from $Q3 to $max'";

BEGIN_PGML
A boxplot for a set of [$number] scores is given below.

>>[! $alt_text !]{$graph}{600}<<

How many scores are represented in the blue section of the boxplot? [_]{5}{15}

*Note: the shaded whiskers are blue and thicker.*
END_PGML

#  Answers

$showPartialCorrectAnswers = 1;

$ans = $n;    #The correct answer depends on the graph chosen.
if ($choose == 3) { $ans = 2 * $n; }

ANS(
    Real($ans)->cmp->withPostFilter(AnswerHints(
        Real(25)  => ["Give the number of scores not the percent."],
        Real(.25) =>
            ["Give the number of scores not the fraction of scores."],
        Real(50)  => ["Give the number of scores not the percent."],
        Real(.50) =>
            ["Give the number of scores not the fraction of scores."]
    ))
);

ENDDOCUMENT();        # This should be the last executable line in the problem.