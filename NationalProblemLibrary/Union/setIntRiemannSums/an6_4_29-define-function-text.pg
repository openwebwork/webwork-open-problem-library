# This file defines the function to be used for the corresponding problem,
# and is common to the three problems asking for a Riemann sum with left, 
# right, and midpoint estimates
##############################################
##    problem setup:

$a = 0;                   # left endpoint of the interval of integration
$b = random(2,4,1);       # right endpoint of the interval of integration
$n = random(4,6,1);       # number of intervals in the Riemann sum
$offset = 0;              # $offset is 0 for left endpoint, 
                          #            1 for right endpoint, 
                          #           .5 for midpoint
$f = "x^2";               # the function for the Riemann sum 
                          #      repeat the function below!

# Define a subroutine for the function to use for Riemann summing 
sub f {my $x = shift;
  return $x**2;
}

# The Riemann summing function
# The parameters being passed are:
# $a = the left endpoint of the interval, 
# $b = the right end-point of the interval,
# $n = the number of intervals,
# $offset (if present) is a number between 0 and 1 that
#      indicates where within each interval, the point should
#      be taken.  E.g., 0 = left-end, .5 = midpoint, 1 = right-end.
#      The default is 0.
sub RiemannSum {
  my ($a,$b,$n,$offset) = @_;
  $offset = 0 unless defined $offset;
  my $dx = ($b-$a)/$n; $offset *= $dx;
  my $sum = 0;
  foreach $i (0..$n-1) {$sum += f($a + $i*$dx + $offset)}
  return $dx * $sum;
}
