# DESCRIPTION
# Problem from Functions Modeling Change, Connally et al., 3rd ed.
# WeBWorK problem written by Adam Spiegler, <aspiegler@luc.edu>
# ENDDESCRIPTION

## DBsubject('Precalculus')
## DBchapter('Trigonometric Functions')
## DBsection('Introduction to Periodic Functions')
## KEYWORDS('periodic','period','amplitude','midline')
## TitleText1('Functions Modeling Change')
## EditionText1('3')
## AuthorText1('Connally')
## Section1('6.1')
## Problem1('10')
## Author('Adam Spiegler and Paul Pearson')
## Institution('Loyola University Chicago and Fort Lewis College')

DOCUMENT();       

loadMacros("PG.pl",
           "PGbasicmacros.pl",
#           "PGchoicemacros.pl",
           "PGanswermacros.pl",
           "PGgraphmacros.pl",
#           "PGauxiliaryFunctions.pl",
"MathObjects.pl",
"AnswerFormatHelp.pl",
"PGcourse.pl",
"unionTables.pl",
           );
       
TEXT(beginproblem()); # standard preamble to each problem.

Context("Numeric");

$showPartialCorrectAnswers = 1;


# we graph the function $a - $b cos(2pi x)
$a = non_zero_random(-7,7,1);
$b = random(1,5,1);

@times = (0.5,1,2);  # number periods before second (out of 4) gridlines
$i = random(0,2,1);
$k = $times[$i];
$mark = random(1,5,1);
for($j = 1; $j <= 4; $j++) { $label[$j] = $mark*$j };
$period = 2*$mark*$k;


$ymin = ($a - $b - 1 < 0) ? ($a - $b - 1) : -1;
$ymax = ($a + $b + 1 > 0) ? ($a + $b + 1) : 1;
$dy = $ymax - $ymin;

$graph = init_graph(-2,$ymin,2,$ymax,'axes'=>[0,0],'grid'=>[ 8,$dy ]);
$graph->lb('reset');
$graph->lb(new Label(-2,-.15,-$label[4],'black','left','top'));
$graph->lb(new Label(-1.5,-.15,-$label[3],'black','left','top'));
$graph->lb(new Label(-1,-.15,-$label[2],'black','left','top'));
$graph->lb(new Label(-.5,-.15,-$label[1],'black','left','top'));

$graph->lb(new Label(2,-.15,$label[4],'black','right','top'));
$graph->lb(new Label(1.5,-.15,$label[3],'black','right','top'));
$graph->lb(new Label(1,-.15,$label[2],'black','right','top'));
$graph->lb(new Label(.5,-.15,$label[1],'black','right','top'));


$graph->lb(new Label(.05,$a+$b,$a+$b,'black','left','top'));
$graph->lb(new Label(.05,$a-$b,$a-$b,'black','left','top'));


$f1[0] = "$a-$b*cos(2*pi/$k*x) for x in <-2,0> using color:blue and weight:2";
$f2[0] = "$a-$b*cos(2*pi/$k*x) for x in <0,2> using color:blue and weight:2";

$f1[1] = "$a-$b*sin(2*pi/$k*x) for x in <-2,0> using color:blue and weight:2";
$f2[1] = "$a-$b*sin(2*pi/$k*x) for x in <0,2> using color:blue and weight:2";
$m = random(0,1,1);

plot_functions( $graph, $f1[$m], $f2[$m] );
$fig = image(insertGraph($graph),width => 400,height => 400,tex_size => 700);


BEGIN_TEXT
\{
ColumnTable(
"Estimate the period, amplitude, and midline of the graph below.".
$BR.
$BR.
"(a) The period of the graph is ".ans_rule(10).$SPACE.AnswerFormatHelp("numbers").
$BR.
$BR.
"(b) The midline of the graph is ".ans_rule(10).$SPACE.AnswerFormatHelp("numbers").
$BR.
$BR.
"(c) The amplitude of the graph is ".ans_rule(10).$SPACE.AnswerFormatHelp("numbers")
,
$BCENTER.
$fig.
$BR.
"${BITALIC}(Click on graph to enlarge.)$EITALIC".
$ECENTER
,
indent=>"0", separation=>"30", valign=>"TOP"
)
\}
END_TEXT

ANS( Compute("$period")->cmp() );
ANS( Compute("$a")->cmp() );
ANS( Compute("$b")->cmp() );

#ANS( num_cmp( $period ) );
#ANS( num_cmp( $a ) );
#ANS( num_cmp( $b ) );

$max = $a + $b;
$min = $a - $b;

SOLUTION(EV3(<<'END_SOLUTION'));
$BR $SPACE $BR 
$BBOLD  SOLUTION $EBOLD
$BR 
a) The graph appears to have a period of $period.  Every change in the $BITALIC x $EITALIC value of $period brings us back to the same $BITALIC y $EITALIC value.
$BR $SPACE $BR
b) The midline of the graph is $a since $BR
\( \ \ \ \ \ \ \mbox{amplitude} = \frac{ y_{max} + y_{min} }{2} = \frac{  $max + $min }{2} = $a \)
$BR $SPACE $BR
c) The amplitude is how much the maximum or minimum $BITALIC y $EITALIC value differs from the average (midline).  Since the maximum $BITALIC y $EITALIC value is $max and the midline is $a, the amplitude is $max - $a = $b.
$BR 
END_SOLUTION

ENDDOCUMENT();