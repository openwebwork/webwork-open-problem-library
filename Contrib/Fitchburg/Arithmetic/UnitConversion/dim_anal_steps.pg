## DESCRIPTION
## Step through two problems using Dimensional Analysis
## ENDDESCRIPTION

## KEYWORDS('units', 'dimensional', 'analysis')

## DBsubject('Algebra')
## DBchapter('Fundamentals')
## DBsection('Real Numbers')
## Date('2025-01-21')
## Author('Peter Staab')
## Institution('Fitchburg State University')

DOCUMENT();

loadMacros(
    "PGstandard.pl",        "PGML.pl",
    'randomPerson.pl',      'scaffold.pl',
    'parserMultiAnswer.pl', 'contextUnits.pl',
    "PGcourse.pl",
);

Context('LimitedUnits')->withUnitsFor("length", 'time');

$m = random(3, 7);

$equiv = sub {
    my ($correct, $student, $self) = @_;
    my ($s1, $s2) = @{$student};
    my ($f1, $f2) = @{$correct};

    return
        (
            (
                $f1->number == $s1->number
                && $f1->unit == $s1->unit
                && $f2->number == $s2->number
                && $f2->unit == $s2->unit
            )
            || ($f1->number == $s2->number
                && $f1->unit == $s2->unit
                && $f2->number == $s1->number
                && $f2->unit == $s1->unit)
        ) ? [ 1, 1 ]
        : (
            ($f1->number == $s1->number && $f1->unit == $s1->unit)
            || ($f2->number == $s1->number
                && $f2->unit == $s1->unit)
        ) ? [ 1, 0 ]
        : ($f1->number == $s2->number && $f1->unit == $s2->unit
            || $f2->number == $s2->number && $f2->unit == $f2->unit) ? [ 0, 1 ]
        : [ 0, 0 ];
};

$multians1 = MultiAnswer(Compute('1 mi'), Compute('5280 ft'))->with(
    singleResult => 0,
    checker      => $equiv
);

$p = randomPerson();

$speed = random(8,  16, 2);
$min   = random(20, 50, 5);

BEGIN_PGML
This problem walks you through how to approach two different problems using dimensional analysis.  Recall that you start with some quantity and multiply by "convenient forms of 1".
END_PGML

Scaffold::Begin();
Section::Begin('Part 1');

BEGIN_PGML
For this problem, we will want to solve: Convert [$m] miles to feet.

First, what is the conversion equation between miles and feet?

[_]{$multians1} [`=`] [_]{$multians1}


[@ helpLink('units')@]*
END_PGML

BEGIN_PGML_SOLUTION
This uses the fact that 1 mile = 5280 ft.
END_PGML_SOLUTION

Section::End();

Section::Begin('Peforming the conversion');

$ans1 = Compute('1 mi');
$ans2 = Compute('5280 ft');
$d    = $m * 5280;
$feet = Compute("$d ft");

BEGIN_PGML

To peform the conversion , start with the [$m] miles and then multiply by the rate as a fraction given by the conversion equation [`1\;\text{mi} = 5280\;\text{ft}`].

[@ LayoutTable(
    [ [
        PGML('[`` [$m] \; \text{miles} \cdot ``]'),
        LayoutTable([ [ [ PGML('[_]{$ans2->cmp(sameUnits => 1)}'), bottom => 1 ] ], [ PGML('[_]{$ans1->cmp(sameUnits => 1)}') ] ]),
        PGML('[` = `]'),
        PGML('[_]{$feet}')
    ] ],
    valign  => 'middle',
    padding => [ 0.25, 0.1 ]
); @]*

[@ helpLink('units')@]*
END_PGML

BEGIN_PGML_SOLUTION
We first use the fact that 1 mi = 5280 ft.  This will go into the first fraction where the miles are in the bottom to ensure cancelling the miles term.

[```[$m]\;\text{miles} \cdot \frac{5280\;\text{ft}}{1\;\text{mi}} = [$feet]```]
END_PGML_SOLUTION

Section::End();

Section::Begin('Part 2');

$ans3 = Compute(' 1 hr');
$ans4 = Compute('60 min');

$ans5 = Compute("$speed mi");
$ans6 = Compute("1 hr");

$miles = $min * $speed / 60;
$dist  = Compute("$miles mi");

$multians2 = MultiAnswer($ans3, $ans4)->with(
    singleResult => 0,
    checker      => $equiv
);

$multians3 = MultiAnswer($ans5, $ans6)->with(
    singleResult => 0,
    checker      => $equiv
);

BEGIN_PGML
We now want to solve the problem: [$p] bikes at the rate of [$speed] miles per hour.  If [$p->they] [$p->verb('bike')] for [$min] minutes, how many miles does [$p] ride?


For this problem, we have two conversion equations.  The first is the conversion between hours and minutes:

[_]{$multians2} [`=`] [_]{$multians2}

The second is the rate at which [$p->they] [$p->verb('bike')].

[_]{$multians3} [`=`] [_]{$multians3}

[@ helpLink('units')@]*
END_PGML

BEGIN_PGML_SOLUTION
For this, we first need that 1 hour = 60 minutes and the second uses the given rate for the second equation [`[$speed]\;\text{miles} = 1\;\text{hour}`].
END_PGML_SOLUTION
Section::End();

Section::Begin('Finding the distance');

BEGIN_PGML
Find the number of miles that [$p] bikes  in [$min] minutes.

Fill in the following expression where the first fraction involve the first conversion equation, [`1\;\text{hr} = 60\;\text{min}`] and the second fraction involves the second conversion equation, [`[$speed]\;\text{mi} = 1\;\text{hr}`]

[@ LayoutTable(
    [ [
        PGML('[`` [$min] \; \text{min} \cdot ``]'),
        LayoutTable([ [ [ PGML('[_]{$ans3->cmp(sameUnits => 1)}'), bottom => 1 ] ],
                      [ PGML('[_]{$ans4->cmp(sameUnits => 1)}') ] ]),
                      PGML('[` \cdot `]'),
        LayoutTable([ [ [ PGML('[_]{$ans5->cmp(sameUnits => 1)}'), bottom => 1 ] ],
                      [ PGML('[_]{$ans6->cmp(sameUnits => 1)}') ] ]),
        PGML('[` = `]'),
        PGML('[_]{$dist->cmp(sameUnits => 1)}')
    ] ],
    valign  => 'middle',
    padding => [ 0.25, 0.1 ]
); @]*

[@ helpLink('units')@]*
END_PGML
BEGIN_PGML_SOLUTION
For this we use the two conversion equations found above with the goal of converting the minutes to  miles.  The first will be the fraction using the first conversion equation with min in the bottom to cancel the minute term.  The second will be to use the second conversion equation with hour in the bottom to cancel the hour term and have miles in the top.

[```[$min]\;\text{min} \cdot \frac{1\;\text{hr}}{60\;\text{min}} \cdot
\frac{[$speed]\;\text{mi}}{1\;\text{hr}} = [$dist]```]
END_PGML_SOLUTION

Section::End();
Scaffold::End();

ENDDOCUMENT();
