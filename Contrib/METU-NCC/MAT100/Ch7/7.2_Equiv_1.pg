## BEGIN_DESCRIPTION
##  Equivalent phase shifts
## END_DESCRIPTION
##
##############################################
## DBsubject(Trigonometry)
## DBchapter(Trigonometric functions)
## DBsection(Sine & cosine functions - definitions, graphs, & properties)
## Institution(METU-NCC)
## Author(Benjamin Walter)
## Level(2)
## Language(en)
## MO(1)
###############################################


DOCUMENT();        # This should be the first executable line in the problem.

loadMacros(
  "PGstandard.pl",
  "PGcourse.pl",
  "MathObjects.pl",
  "contextFraction.pl",
);

sub pick {
  my ($k, @in) = @_;
  return $in[random(0,$#in)] if ($k==1);
  my @out = ();
  while (@out < $k) { push( @out, splice(@in, random(0,$#in), 1) ); }
  @out; 
};

# Euclidean algorithm (from perlmonks.org)
sub reduce {
  ($x,$y) = @_; 
  ($x,$y) = ($y%$x,$x) while $x;
  map $_/$y,@_
}

TEXT(beginproblem());

COMMENT("equivalent phase shifts");


Context("Fraction");
Context()->variables->are(x=>"Real");
Context()->flags->set(
   reduceConstants => 0,
   reduceConstantFunctions => 0,
);

my $b = random(5,7);
my $a = random(1,$b-1);
($a,$b) = reduce($a,$b);

my $phi = Formula("$a pi/$b")->reduce; 

$expr = Formula("sin(x+$phi)");

@q = (
  " \sin\Bigl(x-",
  " \cos\Bigl(x+",
  "-\sin\Bigl(x+",
  "-\cos\Bigl(x+",
);

@ans = (
  Formula("2 pi - $phi")->reduce, 
  Formula("$phi - pi/2")->reduce, 
  Formula("$phi + pi")->reduce, 
  Formula("$phi + pi/2")->reduce, 
);

$ans[1] = Formula("$phi + 3 pi/2")->reduce if ($ans[1] < 0);

@index = ("a","b","c","d","e","f","g");

Context()->texStrings;

BEGIN_TEXT

Fill in the angle between \(0\) and \(2\pi\) making expressions equal.

END_TEXT
for($i=0;$i<=$#ans;$i++) {
BEGIN_TEXT

$PAR
($index[$i]) \(\quad $expr = $q[$i]\) \{ans_rule(10);\} \(\Bigr)\)

END_TEXT
}

Context()->normalStrings;

$showPartialCorrectAnswers = 1;

foreach (0..$#ans) { ANS($ans[$_]->cmp()); }


ENDDOCUMENT();        # This should be the last executable line in the problem.

