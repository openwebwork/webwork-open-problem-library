## BEGIN_DESCRIPTION
##  trig eqn with sin2x
## END_DESCRIPTION
##
##############################################
## DBsubject(Trigonometry)
## DBchapter(Analytic trigonometry)
## DBsection(Solving trigonometric equations exactly)
## Institution(METU-NCC)
## Author(Benjamin Walter)
## Level(2)
## Language(en)
## MO(1)
###############################################


DOCUMENT();        # This should be the first executable line in the problem.

loadMacros(
  "PGstandard.pl",
  "PGcourse.pl",
  "MathObjects.pl",
);


sub pick {
  my ($k, @in) = @_;
  return $in[random(0,$#in)] if ($k==1);
  my @out = ();
  while (@out < $k) { push( @out, splice(@in, random(0,$#in), 1) ); }
  @out;
};


TEXT(beginproblem());

COMMENT("16 possibilities: sin x and cos x = +-1 or = +-1/2");

Context("Numeric");
#Context()->constants->remove(pi);
Context()->variables->add(pi=>['Real',TeX=>"\pi"]);
#Context()->flags->set(
#   reduceConstants => 0,
#   reduceConstantFunctions => 0,
#);

my ($s,$t) = (random(0,1),random(0,1));    # signs of solutions

($lhs,$rhs) = (Formula("sin(2x)"),Formula("0"));

$ans = List("");

if (random(0,1)==0) {   # 2 sin x = +-1 

  $ans = ($s==0) ? List(Formula("7 pi/6"),Formula("11 pi/6")) :
                   List(Formula("  pi/6"),Formula(" 5 pi/6"));

  if (random(0,1)==0) { # 2 cos x = +-1
    $lhs *= 2;

    if ($s==0) { $lhs += Formula("2 cos(x)"); } else { $rhs += Formula("2 cos(x)"); }

    $ans = List($ans->value, 
        ($t==0) ? (Formula("2 pi/3"),Formula("4 pi/3")) :
                  (Formula("  pi/3"),Formula("5 pi/3")));


  } else {              # cos x = +-1
    if ($s==0) { $lhs += Formula("  cos(x)"); } else { $rhs += Formula("  cos(x)"); }

    $ans = List($ans->value, 
        ($t==0) ? Formula("pi") :
                  Formula("0"));
  }
  if ($t==0) { $lhs += Formula("2 sin(x)"); } else { $rhs += Formula("2 sin(x)"); }
  if (($s+$t)%2==0) { $lhs += Formula("1"); } else { $rhs += Formula("1");        }

} else {               # sin x = +-1
  $ans = ($s==0) ? List(Formula("3 pi/2")) :
                   List(Formula("  pi/2"));

  if (random(0,1)==0) { # 2 cos x = +-1
    if ($t==0) { $lhs += Formula("  sin(x)"); } else { $rhs += Formula("  sin(x)"); }
    if (($s+$t)%2==0) { $lhs += Formula("1"); } else { $rhs += Formula("1");        }

    $ans = List($ans->value, 
        ($t==0) ? (Formula("2 pi/3"),Formula("4 pi/3")) :
                  (Formula("  pi/3"),Formula("5 pi/3")));
 
  } else {              # cos x = +-1
    if ($t==0) { $lhs += Formula("2 sin(x)"); } else { $rhs += Formula("2 sin(x)"); }
    if (($s+$t)%2==0) { $lhs += Formula("2"); } else { $rhs += Formula("2");        }

    $ans = List($ans->value, 
        ($t==0) ? Formula("pi") :
                  Formula("0"));
  }
  if ($s==0) { $lhs += Formula("2 cos(x)"); } else { $rhs += Formula("2 cos(x)"); }
}

$lhs = $lhs->reduce; $rhs = $rhs->reduce;

Context()->texStrings;

BEGIN_TEXT

Find all solutions \(x\in [0,2\pi)\).
\[ $lhs = $rhs  \]

$PAR

\(\quad x = \) \{ ans_rule(10); \}

$PAR
Note: your answer must be written using "pi" for \(\pi\).
END_TEXT


Context()->normalStrings;

$showPartialCorrectAnswers = 1;

ANS(List($ans)->cmp());


ENDDOCUMENT();        # This should be the last executable line in the problem.

