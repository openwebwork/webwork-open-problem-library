## DBsubject(Financial mathematics)
## DBchapter(Interest)
## DBsection(Compound interest)
## Level(2)
## KEYWORDS('simple interest rate', 'compound interest')
## Author(Kyle Schlitt)
## Institution(TRU)
## Language(en)

DOCUMENT();

loadMacros(
  'PGstandard.pl',
  'PGML.pl',
  'contextCurrency.pl',
  'parserPopUp.pl'
);

Context("Currency");

Context()->flags->set(
  tolerance => 0.01,
  tolType => "absolute",
);

# what is the compounding frequency
@frequencies = (1,2,4,6,12,24,52,365);

@compounding_type = (
  "annually",
  "semi-annually",
  "quarterly",
  "bi-monthly",
  "monthly",
  "semi-monthly",
  "weekly",
  "daily"
);

do {
  $P = Currency(10000 + 1000 * random(0,10,1));
  $t = random(15,20,1);

  $simple_r = 0.07 + 0.01 * random(0,3,1);
  $simple_r_percent = $simple_r * 100;
  $compound_r = $simple_r - 0.02;
  $compound_r_percent = $compound_r * 100;

  $k = random(0,7,1);
  $m = $frequencies[$k];
  $m_word = @compounding_type[$k];

  $n = $m*$t;
  $i = $compound_r/$m;

  $simple_amount = $P * (1 + $simple_r*$t);
  $simple_interest = $simple_amount - $P;

  $compound_amount = $P * (1 + $i)**($n);
  $compound_interest = $compound_amount - $P;

  if ($compound_amount > $simple_amount) {
    $correct_choice = "Option #2";
  } else { # unlikely
    $correct_choice = "Option #1";
  }

  $final_choice = DropDown(
    ["Option #1", "Option #2"],
    $correct_choice,
    placeholder => "Select One"
  );

} while ($compound_amount == $simple_amount);

BEGIN_PGML

You plan to invest [$P] in a retirement fund for [$t] years, and you are offered two investment options:

**Option #1:** Simple interest at an annual rate of [$simple_r_percent]%.

**Option #2:** Compound interest at an annual rate of [$compound_r_percent]%, compounded [$m_word].

How much interest will each investment option yield?  After comparing the two plans, which option should be chosen?

----

**Answer**:

Under simple interest, the investment will earn [_]{$simple_interest} in interest, growing to a total of [_]{$simple_amount}.

Under compound interest, the investment will earn [_]{$compound_interest} in interest, growing to a total of [_]{$compound_amount}.

[_]{$final_choice} should be chosen.

END_PGML

ENDDOCUMENT();