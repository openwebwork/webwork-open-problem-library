## DBsubject(Algebra)
## DBchapter(Linear equations and functions)
## DBsection(Applications and models)
## Level(2)
## KEYWORDS('cost', linear equations')
## Author(Kyle Schlitt)
## Institution(TRU)
## Language(en)

DOCUMENT();

loadMacros(
  "PGstandard.pl",
  "PGML.pl",
  "niceTables.pl",
  "contextCurrency.pl",
  "parserPopUp.pl"
);

Context("Currency");

$x = random(20,30,1);
$km = int($x/random(2,5,1));

$base_B = 3 + 0.01*random(0,400,1);

$mile_A = 0.15 + 0.01*random(0,25);
$mile_B = $mile_A;
while ($mile_B == $mile_A) {$mile_B = 0.15 + 0.01*random(0,25);}

$base_A = $x*($mile_B - $mile_A) + $base_B;

while ($base_A < 2) {
  $x = $x - 1;
  $base_A = $base_A - ($mile_B - $mile_A);
}

$summary = DataTable(
  [
    [
      ['', rowtop => '1pt', midrule => 1, tex => '\cellcolor[HTML]{000000}'],
      ['Base Rate', tex => '\cellcolor[HTML]{FFFFFF}'],
      ['Mileage Fee',tex => '\cellcolor[HTML]{FFFFFF}']
    ],
    [
      ['Company A', tex => '\cellcolor[HTML]{FFFFFF}'],
      [Currency("$base_A"),tex => '\cellcolor[HTML]{FFFFFF}'],
      [Currency("$mile_A"), tex => '\cellcolor[HTML]{FFFFFF}']
    ],
    [
      ['Company B', midrule => 1, tex => '\cellcolor[HTML]{FFFFFF}'],
      [Currency("$base_B"), tex => '\cellcolor[HTML]{FFFFFF}'],
      [Currency("$mile_B"), tex => '\cellcolor[HTML]{FFFFFF}']
    ]
  ], align => '|r|c|c|'
);

BEGIN_PGML

You are stranded without a vehicle and need to call a taxi.  There are two companies to choose from: Company A and Company B.

Each of these companies charges a different base rate and mileage charge, both of which are shown in the table below.

[$summary]*

----

END_PGML

$cost_func_A = Formula("$base_A + $mile_A x");
$cost_func_B = Formula("$base_B + $mile_B x");

BEGIN_PGML

Let [`x`] denote the length of your trip, measured in km.

Express the cost of travelling with Company A as a function [`C_{A}`] of [`x`].

**Answer:** [`C_{A}(x)=`] [_]{$cost_func_A}

Express the cost of travelling with Company B as a function [`C_{B}`] of [`x`].

**Answer:** [`C_{B}(x)=`] [_]{$cost_func_B}

----

END_PGML

$cost_A = $cost_func_A->substitute(x => "$km")->eval();
$cost_B = $cost_func_B->substitute(x => "$km")->eval();

if ($cost_A < $cost_B) {$company_answer = "Company A";}
else {$company_answer = "Company B";}

$popup = DropDown(
  ['Company A', 'Company B'],
  $company_answer,
  placeholder => 'Select One'
);

BEGIN_PGML

If you need to travel [`[$km]`]km, which taxi company should you call?

**Answer:** [_]{$popup}

At what point would this change?  That is, how far away would your destination need to be before you would change your mind?

**Answer:** [_]{$x} km

END_PGML

ENDDOCUMENT();