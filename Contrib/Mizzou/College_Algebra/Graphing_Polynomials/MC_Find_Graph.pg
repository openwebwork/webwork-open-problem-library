# DESCRIPTION
# MC question that asks to graph a polynomial
# ENDDESCRIPTION

## DBsubject('Algebra')
## DBchapter('Functions')
## DBsection('Graphs of Functions')
## KEYWORDS('functions', 'polynomials', 'graphs')
## Author1('Rick Lynch')
## Author2('Teri Christiansen')
## Institution('University of Missouri-Columbia')


###########################################################################
# initialization 
###########################################################################
DOCUMENT();
loadMacros(
  "AnswerFormatHelp.pl",
  "MathObjects.pl",
  "PeriodicRerandomization.pl",
  "PGgraphmacros.pl",
  "PGstandard.pl",
  "parserMultiAnswer.pl",
  "unionTables.pl",
);

TEXT(beginproblem());
PeriodicRerandomization("1");
$refreshCachedImages = 1;
$showPartialCorrectAnswers = 1;


###########################################################################
# setup contexts and variables 
###########################################################################
Context("Numeric");
$c1 = random(3,5);
$c2 = random(1,5);
$c3 = random(1,4);
$width = 591;
$height = 616;
@figs = (0..3);
for ($i = 0; $i < 4; $i++) {
  $figs[$i] = image("0".($c1)."/00".($c2)."/0".($i+1).".png", width=>$width/2, height=>$height/2, tex_size=>300 )
}
Context()->strings->add(A=>{}, B=>{}, C=>{}, D=>{}, E=>{}, "none"=>{});
@possans = ("A", "B", "C", "D", "E");
$ans = $possans[$c3-1];

if ($c1 == 3) {
  if ($c2 == 1) {
    $num = 1;
    $den = 3;
    if ($c3 == 1) {
      $a = -1;
      $z1 = 3;
      $z2 = -3;
      $z3 = -5;
    } elsif ($c3 == 2) {
      $a = -1;
      $z1 = -3;
      $z2 = 3;
      $z3 = 5;
    } elsif ($c3 == 3) {
      $a = 1;
      $z1 = 3;
      $z2 = -3;
      $z3 = -5;
    } elsif ($c3 == 4) {
      $a = 1;
      $z1 = -3;
      $z2 = 3;
      $z3 = 5;
    }
  } elsif ($c2 == 2) {
    $num = 1;
    $den = 15;
    if ($c3 == 1) {
      $a = -1;
      $z1 = 3;
      $z2 = 3;
      $z3 = -5;
    } elsif ($c3 == 2) {
      $a = -1;
      $z1 = -3;
      $z2 = 3;
      $z3 = 5;
    } elsif ($c3 == 3) {
      $a = 1;
      $z1 = 3;
      $z2 = -3;
      $z3 = -5;
    } elsif ($c3 == 4) {
      $a = 1;
      $z1 = -3;
      $z2 = 3;
      $z3 = 5;
    }
  } elsif ($c2 == 3) {
    $num = 2;
    $den = 5;
    if ($c3 == 1) {
      $a = -1;
      $z1 = 1;
      $z2 = 1;
      $z3 = 5;
    } elsif ($c3 == 2) {
      $a = -1;
      $z1 = -1;
      $z2 = -1;
      $z3 = -5;
    } elsif ($c3 == 3) {
      $a = 1;
      $z1 = 1;
      $z2 = 1;
      $z3 = 5;
    } elsif ($c3 == 4) {
      $a = 1;
      $z1 = -1;
      $z2 = -1;
      $z3 = -5;
    }
  } elsif ($c2 == 4) {
    $num = 3;
    $den = 2;
    if ($c3 == 1) {
      $a = -1;
      $z1 = 1;
      $z2 = 1;
      $z3 = -4;
    } elsif ($c3 == 2) {
      $a = -1;
      $z1 = -1;
      $z2 = -1;
      $z3 = 4;
    } elsif ($c3 == 3) {
      $a = 1;
      $z1 = 1;
      $z2 = 1;
      $z3 = -4;
    } elsif ($c3 == 4) {
      $a = 1;
      $z1 = -1;
      $z2 = -1;
      $z3 = 4;
    }
  } elsif ($c2 == 5) {
    $num = 3;
    $den = 4;
    if ($c3 == 1) {
      $a = -1;
      $z1 = 4;
      $z2 = -2;
      $z3 = 0;
    } elsif ($c3 == 2) {
      $a = -1;
      $z1 = -4;
      $z2 = 2;
      $z3 = 0;
    } elsif ($c3 == 3) {
      $a = 1;
      $z1 = 4;
      $z2 = -2;
      $z3 = 0;
    } elsif ($c3 == 4) {
      $a = 1;
      $z1 = -4;
      $z2 = 2;
      $z3 = 0;
    }
  }
  $dispans = "";
  if ($a < 0) {
    $dispans = "-"
  }
  if ($den != 1) {
    $dispans = ($dispans)."\frac{$num}{$den}";
  }
  if ($z2 == 0 && $z3 == 0) {
    $dispans = ($dispans)."x^2 (x - $z1)";
  } elsif ($z3 == 0) {
    $dispans = ($dispans)."x";
    if ($z1 == $z2) {
      $dispans = ($dispans)."(x-$z1)^2";
    } else {
      $dispans = ($dispans)."(x-$z1)(x-$z2)";
    }
  } else {
    if ($z1 == $z2) {
      $dispans = ($dispans)."(x-$z1)^2(x-$z3)";
    } else {
      $dispans = ($dispans)."(x-$z1)(x-$z2)(x-$z3)";
    }
  }
}

if ($c1 == 4) {
  if ($c2 == 1) {
    $num = 1;
    $den = 4;
    if ($c3 == 1) {
      $a = -1;
      $z1 = 4;
      $z2 = 2;
      $z3 = 0;
      $z4 = 0;
    } elsif ($c3 == 2) {
      $a = -1;
      $z1 = -4;
      $z2 = -2;
      $z3 = 0;
      $z4 = 0;
    } elsif ($c3 == 3) {
      $a = 1;
      $z1 = 4;
      $z2 = 2;
      $z3 = 0;
      $z4 = 0;
    } elsif ($c3 == 4) {
      $a = 1;
      $z1 = -4;
      $z2 = -2;
      $z3 = 0;
      $z4 = 0;
    }
  } elsif ($c2 == 2) {
    $num = 1;
    $den = 8;
    if ($c3 == 1) {
      $a = -1;
      $z1 = 4;
      $z2 = -2;
      $z3 = 0;
      $z4 = 0;
    } elsif ($c3 == 2) {
      $a = -1;
      $z1 = -4;
      $z2 = 2;
      $z3 = 0;
      $z4 = 0;
    } elsif ($c3 == 3) {
      $a = 1;
      $z1 = 4;
      $z2 = -2;
      $z3 = 0;
      $z4 = 0;
    } elsif ($c3 == 4) {
      $a = 1;
      $z1 = -4;
      $z2 = 2;
      $z3 = 0;
      $z4 = 0;
    }
  } elsif ($c2 == 3) {
    $num = 2;
    $den = 5;
    if ($c3 == 1) {
      $a = -1;
      $z1 = -1;
      $z2 = -1;
      $z3 = 5;
      $z4 = 2;
    } elsif ($c3 == 2) {
      $a = -1;
      $z1 = 1;
      $z2 = 1;
      $z3 = -5;
      $z4 = -2;
    } elsif ($c3 == 3) {
      $a = 1;
      $z1 = -1;
      $z2 = -1;
      $z3 = 5;
      $z4 = 2;
    } elsif ($c3 == 4) {
      $a = 1;
      $z1 = 1;
      $z2 = 1;
      $z3 = -5;
      $z4 = -2;
    }
  } elsif ($c2 == 4) {
    $num = 5;
    $den = 6;
    if ($c3 == 1) {
      $a = -1;
      $z1 = 2;
      $z2 = 2;
      $z3 = -3;
      $z4 = -1;
    } elsif ($c3 == 2) {
      $a = -1;
      $z1 = -2;
      $z2 = -2;
      $z3 = 3;
      $z4 = 1;
    } elsif ($c3 == 3) {
      $a = 1;
      $z1 = 2;
      $z2 = 2;
      $z3 = -3;
      $z4 = -1;
    } elsif ($c3 == 4) {
      $a = 1;
      $z1 = -2;
      $z2 = -2;
      $z3 = 3;
      $z4 = 1;
    }
  } elsif ($c2 == 5) {
    $num = 1;
    $den = 1;
    if ($c3 == 1) {
      $a = -1;
      $z1 = -2;
      $z2 = -2;
      $z3 = 3;
      $z4 = 1;
    } elsif ($c3 == 2) {
      $a = -1;
      $z1 = 2;
      $z2 = 2;
      $z3 = -3;
      $z4 = -1;
    } elsif ($c3 == 3) {
      $a = 1;
      $z1 = -2;
      $z2 = -2;
      $z3 = 3;
      $z4 = 1;
    } elsif ($c3 == 4) {
      $a = 1;
      $z1 = 2;
      $z2 = 2;
      $z3 = -3;
      $z4 = -1;
    }
  }
  $dispans = "";
  if ($a < 0) {
    $dispans = "-"
  }
  if ($den != 1) {
    $dispans = ($dispans)."\frac{$num}{$den}";
  }
  if ($z3 == 0 && $z4 == 0) {
    $dispans = ($dispans)."x^2";
    if ($z1 == $z2) {
      $dispans = ($dispans)."(x-$z1)^2";
    } else {
      $dispans = ($dispans)."(x-$z1)(x-$z2)"; 
    }
  } elsif ($z4 == 0) {
    $dispans = ($dispans)."x";
    if ($z1 == $z2) {
      $dispans = ($dispans)."(x-$z1)^2(x-$z3)";
    } else {
      $dispans = ($dispans)."(x-$z1)(x-$z2)(x-$z3)";
    }
  } else {
    if ($z1 == $z2) {
      if ($z3 == $z4) {
        $dispans = ($dispans)."(x-$z1)^2(x-$z3)^2";
      } else {
        $dispans = ($dispans)."(x-$z1)^2(x-$z3)(x-$z4)";
      }
    } else {
      if ($z3 == $z4) {
        $dispans = ($dispans)."(x-$z1)(x-$z2)(x-$z3)^2";
      } else {
        $dispans = ($dispans)."(x-$z1)(x-$z2)(x-$z3)(x-$z4)";
      }
    }
  }
}

if ($c1 == 5) {
  if ($c2 == 1) {
    $num = 1;
    $den = 3;
    if ($c3 == 1) {
      $a = -1;
      $z1 = 3;
      $z2 = 3;
      $z3 = -1;
      $z4 = -1;
      $z5 = -2;
    } elsif ($c3 == 2) {
      $a = -1;
      $z1 = -3;
      $z2 = -3;
      $z3 = 1;
      $z4 = 1;
      $z5 = 2;
    } elsif ($c3 == 3) {
      $a = 1;
      $z1 = 3;
      $z2 = 3;
      $z3 = -1;
      $z4 = -1;
      $z5 = -2;
    } elsif ($c3 == 4) {
      $a = 1;
      $z1 = -3;
      $z2 = -3;
      $z3 = 1;
      $z4 = 1;
      $z5 = 2;
    }
  } elsif ($c2 == 2) {
    $num = 1;
    $den = 3;
    if ($c3 == 1) {
      $a = -1;
      $z1 = 1;
      $z2 = 1;
      $z3 = -2;
      $z4 = -2;
      $z5 = 3;
    } elsif ($c3 == 2) {
      $a = -1;
      $z1 = -1;
      $z2 = -1;
      $z3 = 2;
      $z4 = 2;
      $z5 = -3;
    } elsif ($c3 == 3) {
      $a = 1;
      $z1 = 1;
      $z2 = 1;
      $z3 = -2;
      $z4 = -2;
      $z5 = 3;
    } elsif ($c3 == 4) {
      $a = 1;
      $z1 = -1;
      $z2 = -1;
      $z3 = 2;
      $z4 = 2;
      $z5 = -3;
    }
  } elsif ($c2 == 3) {
    $num = 1;
    $den = 6;
    if ($c3 == 1) {
      $a = -1;
      $z1 = 3;
      $z2 = 3;
      $z3 = 1;
      $z4 = 1;
      $z5 = -2;
    } elsif ($c3 == 2) {
      $a = -1;
      $z1 = -3;
      $z2 = -3;
      $z3 = -1;
      $z4 = -1;
      $z5 = 2;
    } elsif ($c3 == 3) {
      $a = 1;
      $z1 = 3;
      $z2 = 3;
      $z3 = 1;
      $z4 = 1;
      $z5 = -2;
    } elsif ($c3 == 4) {
      $a = 1;
      $z1 = -3;
      $z2 = -3;
      $z3 = -1;
      $z4 = -1;
      $z5 = 2;
    }
  } elsif ($c2 == 4) {
    $num = 1;
    $den = 8;
    if ($c3 == 1) {
      $a = -1;
      $z1 = 2;
      $z2 = 2;
      $z3 = -4;
      $z4 = 0;
      $z5 = 0;
    } elsif ($c3 == 2) {
      $a = -1;
      $z1 = -2;
      $z2 = -2;
      $z3 = 4;
      $z4 = 0;
      $z5 = 0;
    } elsif ($c3 == 3) {
      $a = 1;
      $z1 = 2;
      $z2 = 2;
      $z3 = -4;
      $z4 = 0;
      $z5 = 0;
    } elsif ($c3 == 4) {
      $a = 1;
      $z1 = -2;
      $z2 = -2;
      $z3 = 4;
      $z4 = 0;
      $z5 = 0;
    }
  } elsif ($c2 == 5) {
    $num = 1;
    $den = 1;
    if ($c3 == 1) {
      $a = -1;
      $z1 = 1;
      $z2 = 1;
      $z3 = -2;
      $z4 = -2;
      $z5 = 3;
    } elsif ($c3 == 2) {
      $a = -1;
      $z1 = -1;
      $z2 = -1;
      $z3 = 2;
      $z4 = 2;
      $z5 = -3;
    } elsif ($c3 == 3) {
      $a = 1;
      $z1 = 1;
      $z2 = 1;
      $z3 = -2;
      $z4 = -2;
      $z5 = 3;
    } elsif ($c3 == 4) {
      $a = 1;
      $z1 = -1;
      $z2 = -1;
      $z3 = 2;
      $z4 = 2;
      $z5 = -3;
    }
  }
  $dispans = "";
  if ($a < 0) {
    $dispans = "-"
  }
  if ($den != 1) {
    $dispans = ($dispans)."\frac{$num}{$den}";
  }
  if ($z4 == 0 && $z5 == 0) {
    $dispans = ($dispans)."x^2";
    if ($z1 == $z2) {
      $dispans = ($dispans)."(x-$z1)^2(x-$z3)";
    } else {
      $dispans = ($dispans)."(x-$z1)(x-$z2)(x-$z3)"; 
    }
  } elsif ($z5 == 0) {
    $dispans = ($dispans)."x";
    if ($z1 == $z2) {
      if ($z3 == $z4) {
        $dispans = ($dispans)."(x-$z1)^2(x-$z3)^2";
      } else {
        $dispans = ($dispans)."(x-$z1)^2(x-$z3)(x-$z4)";
      }
    } else {
      $dispans = ($dispans)."(x-$z1)(x-$z2)(x-$z3)(x-$z4)";
    }
  } else {
    if ($z1 == $z2) {
      if ($z3 == $z4) {
        $dispans = ($dispans)."(x-$z1)^2(x-$z3)^2(x-$z5)";
      } else {
        $dispans = ($dispans)."(x-$z1)^2(x-$z3)(x-$z4)(x-$z5)";
      }
    } else {
      $dispans = ($dispans)."(x-$z1)(x-$z2)(x-$z3)(x-$z4)(x-$z5)";
    }
  }
}

###########################################################################
# state the problem 
###########################################################################
Context()->texStrings;
BEGIN_TEXT

$PAR
$BCENTER
\{ 
BeginTable().
  AlignedRow([$figs[0], $figs[1]]).
  TableSpace(5,0).
  AlignedRow(["A", "B"]).
  TableSpace(25,6).
  AlignedRow([$figs[2], $figs[3]]).
  TableSpace(5,0).
  AlignedRow(["C", "D"]).
EndTable();
\}
$ECENTER 
$PAR

Given that 
$PAR
\[
f(x) = $dispans
\]
$PAR
determine which of the above graphs is the graph of \(f\).
$PAR
Correct Letter: \{ans_rule(5)\}
END_TEXT


###########################################################################
# check the answer  
###########################################################################
ANS(Compute($ans)->cmp());


###########################################################################
# use PeriodicRerandomization to write the answer and generate a new
# version of the problem
###########################################################################
if ($attempts_modp == 0 && $actualAttempts != 0) {
  BEGIN_TEXT
  $PAR
  ${BBOLD}Answer:${EBOLD} \($ans\)
  $PAR
  END_TEXT
} else {
  BEGIN_TEXT
  $BR
  END_TEXT
}
Context()->normalStrings;
PeriodicStatus();


ENDDOCUMENT();