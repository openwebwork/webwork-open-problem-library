##DESCRIPTION
##  Compound Interest: Compute Down Payment for House
##ENDDESCRIPTION

##KEYWORDS('financial mathematics', 'compound interest')

## DBsubject('Financial Mathematics')
## DBchapter('Introduction to Interest')
## DBsection('Compound Interest')
## Date('Spring 2012')
## Author1('David Covert')
## Author2('Jason Aubrey')
## Institution('University of Missouri')

## Updated 2025.02 by Peter Staab, switch to PGML and add a solution.

DOCUMENT();

loadMacros(
    'PGstandard.pl',      'PGML.pl',
    'contextCurrency.pl', 'randomPerson.pl',
    'PGcourse.pl'
);

Context("Currency")->variables->are(t => Real);

$house_value          = Currency(random(150000, 250000, 2000));
$down                 = Currency(random(12.5,   17.5,   0.5));
$apr = random(2,      6,      0.001);
$r = $apr/100; 
$months               = random(15,     36,     3);
$t = $months/12; 
$P = $house_value * $down / 100; # amount to raise
$f = Compute("$P e^(-$r*t)");
$A = $f->eval(t => $t); 

($p1, $p2) = randomPerson(n => 2);

BEGIN_PGML

[$p1] and [$p2] estimate that they want to buy a house for [`[$house_value]`], and they need to make a down payment of [$down]% of the cost of their house.  If they have [`[$months]`] months to save for the down payment, how much do they need to invest into an account earning [$annual_interest_rate]% compounded continuously so that they can reach their goal?

[$p1] and [$p2]  need to invest  [_]{$A}

(*Note:* Your answer should have a dollar sign and be accurate to two decimal places)

END_PGML

BEGIN_PGML_SOLUTION
First, they need to raise [` \frac{[$down]}{100} \cdot [$house_value] = [$P] `]

Next, we use the formula [`A = Pe^{it} `], where [`A`] is the amount above, [`i`] is the annual percentage rate or [$r] and [`t`] is the number of years or  [$t]. Solving this for [`P`] results in 
[``` P = A e^{-it} = [$P] e^{-[$r]\cdot [$t]} = [$A] ```]
END_PGML_SOLUTION


ENDDOCUMENT();
