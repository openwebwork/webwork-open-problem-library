##DESCRIPTION
##  Compound Interest: Compute Down Payment for House
##ENDDESCRIPTION

##KEYWORDS('financial mathematics', 'compound interest')

## DBsubject('Financial Mathematics')
## DBchapter('Introduction to Interest')
## DBsection('Compound Interest')
## Date('Spring 2012')
## Author1('David Covert')
## Author2('Jason Aubrey')
## Institution('University of Missouri')

## Updated 2025.02 by Peter Staab, switch to PGML and add a solution.

DOCUMENT();

loadMacros(
    'PGstandard.pl', 'PGML.pl',
    'contextCurrency.pl', 'randomPerson.pl',
    'PGcourse.pl'
);

Context("Currency")->variables->are(t => Real);

$house_value = Currency(random(150000, 250000, 2000));
$down = random(12.5, 17.5, 0.5);
$apr = random(2,6,0.001);
$r = $apr/100;
$months = random(15,36,3);
$t = $months/12;
$A = $house_value * $down / 100; # amount needed for down 
$P = Real($A*exp(-$r*$t));

($p1, $p2) = randomPerson(n => 2);

BEGIN_PGML

[$p1] and [$p2] estimate that they want to buy a house for [`[$house_value]`], and they will need to make a down payment of [$down]% of the cost of their house.  If they have [`[$months]`] months to save for the down payment, how much do they need to invest now in an account earning [$apr]% interest compounded continuously, so that in [$months] months they will have enough for the down payment?

[$p1] and [$p2]  need to invest  [_]{$P} now.

(*Note:* Your answer should have a dollar sign and be accurate to two decimal places)

END_PGML

BEGIN_PGML_SOLUTION
First, they need [` \frac{[$down]}{100} \ast [$house_value] = [$A] `] for the down payment.

Next, to compute the amount [`P`] that they need to invest now to have the down payment [`A=[$A]`] in [`t`] years, with continuously compounded interest, we use the formula [`A = Pe^{it} `], where [`i=[$apr]%=[$r]`] is the annual percentage rate and [`t=[$months]/12`] is the number of years. Solving this for [`P`] results in 
[``` P = A e^{-it} = [$A] e^{-([$r]\ast [$months]/12)} = [$P] ```]
END_PGML_SOLUTION


ENDDOCUMENT();
