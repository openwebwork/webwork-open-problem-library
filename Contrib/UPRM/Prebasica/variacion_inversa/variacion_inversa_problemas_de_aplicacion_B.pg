#  DESCRIPTION
#
#  Tipo: respuesta corta
#  Variacion inversa: Problemas de aplicación

#  Problema WeBWork escrito por Edwin Florez, 
#  <edwin.florez (at) upr (dot) edu>
#
#  Adaptado desde el sistema quiz.uprm.edu del archivo
#  pedro_prebasica/variacion_inversa/variacion_inversa_problemas_de_aplicacion.db
#
#  ENDDESCRIPTION

## DBsubject(Prebasica)
## DBchapter(Relaciones)
## DBsection(Variacion inversa)
## Level(1)
## KEYWORDS('relaciones','variacion','inversa','aplicaciones')
## Author(Edwin Florez)
## Institution(UPRM)
## Language(es)

DOCUMENT();

loadMacros(
"PGstandard.pl",
"MathObjects.pl",
"PGgraphmacros.pl",
"contextInequalities.pl",
"AnswerFormatHelp.pl",
"PGchoicemacros.pl",
"contextFraction.pl",
"problemRandomize.pl",
"PGpolynomialmacros.pl",
"unionTables.pl"
);

TEXT(beginproblem());
#$refreshCachedImages = 1;

#  Allow for the user to try another version of the problem once they get it correct.
ProblemRandomize(when=>"Correct",onlyAfterDue=>0);

# Show which answers are correct and which ones are incorrect
#$showPartialCorrectAnswers = 0;

##############################################################
#  Setup

#creando la relación a=k/b
@primos = (2, 3, 5);

@factors_k = ();
$k = 1;

#Eligiendo a k como una multiplicación de 5 primos de la lista de primos.
foreach my $i (0..3){
 $r = random(0,$#primos);
 @factors_k[$i] = $primos[$r];
 $k = $k*$primos[$r];
}

#Eligiendo de los 4 factores de k (mínimo 2, máximo 3) cuántos serán para a y el resto para b
$num_fact_a = random(1,2);

$a = 1;
foreach my $i (0..$num_fact_a){
 $a = $a*$factors_k[$i];
}

$b = 1;
foreach my $i ($num_fact_a+1 .. $#factors_k){
 $b = $b*$factors_k[$i];
}

#Eligiendo otra partición diferente de k y asignandola a a1 y b1.
do {
 $num_fact_a1 = random(1,2);
}until( $num_fact_a1 != $num_fact_a );

$a1 = 1;
foreach my $i (0..$num_fact_a1){
 $a1 = $a1*$factors_k[$i];
}

$b1 = 1;
foreach my $i ($num_fact_a1+1 .. $#factors_k){
 $b1 = $b1*$factors_k[$i];
}

$prob = random(0,1);
if ( $prob == 0){
 $pregunta = "el ancho del rectángulo cuando longitud es $a1 pies";
 $answer = Compute($b1);
 $sustituir = "l = \frac{$k}{a} \quad \Rightarrow \quad $a1 = \frac{$k}{a} \quad \Rightarrow \quad a = $b1.";
}else{
  $pregunta = "la longitud del rectángulo cuando el ancho es $b1 pies.";
  $answer = Compute($a1);
  $sustituir = "l= \frac{$k}{a} \quad \Rightarrow \quad l = \frac{$k}{$b1} \quad \Rightarrow \quad l = $a1.";
}

##############################################################
#
#  Text
#

Context()->texStrings;
BEGIN_TEXT
Sea un rectángulo con área constante. La longitud de un rectángulo varía inversamente con su ancho. Si la longitud de un rectángulo es $a pies cuando el ancho es $b pies, encontrar $pregunta
$PAR
(Escribir SOLO el número) 
$PAR
Contestación: = \{ans_rule(20)\} \{ AnswerFormatHelp("number") \}
END_TEXT
Context()->normalStrings;

#Context("Numeric");
##############################################################
#  Answers
#

ANS( $answer->cmp() );

Context()->texStrings;
SOLUTION(EV3(<<'END_SOLUTION'));
$BBOLD Paso 1:$EBOLD Traducir el enunciado a una fórmula de variación inversa
$BCENTER
$PAR
La longitud varía inversamente con la anchura  \(\quad \Rightarrow \quad \text{longitud} = \frac{k}{\text{anchura}}\)
$PAR
$ECENTER
donde \( k \) es la constante de proporcionalidad. 
$PAR
$BBOLD Paso 2:$EBOLD Sustituir valores conocidos para encontrar \( k \). 
\[
  $a = \frac{k}{$b} \quad \Rightarrow \quad k = $a\cdot$b = $k
\]
$PAR
$BBOLD Paso 3:$EBOLD Sustituir el valor de \( k \) y escribir la fórmula
\[
\text{longitud} = \frac{$k}{\text{anchura}} \quad \text{o} \quad l = \frac{$k}{a}
\]
$PAR
$BBOLD Paso 4:$EBOLD Identificar variables conocidas y sustituir los valores en la fórmula
\[
$sustituir
\] 
Por lo tanto la solución es $answer. 
END_SOLUTION
Context()->normalStrings;

ENDDOCUMENT();