#  DESCRIPTION
#
#  Tipo: respuesta corta
#  Problema que pregunta por el punto medio (xm,ym)
#  del segmento representado en el plano cartesiano 
#  por dos puntos dados
#
#  Problema WebWork escrito por Edwin Florez, 
#  <edwin.florez (at) upr (dot) edu>
#
#  Adaptado desde el sistema quiz.uprm.edu del archivo
#  pedro_prebasica/punto_medio/punto_medio_geometria.db
#
#  ENDDESCRIPTION

## DBsubject(Prebasica)
## DBchapter(Plano cartesiano)
## DBsection(Punto medio)
## Level(1)
## KEYWORDS('grafica', 'puntos','plano','coordenadas','segmento', 'punto medio')
## Author(Edwin Florez)
## Institution(UPRM)
## Language(es)

DOCUMENT();

loadMacros(
"PGstandard.pl",
"MathObjects.pl",
"PGgraphmacros.pl",
"AnswerFormatHelp.pl",
"problemRandomize.pl",
"parserRadioButtons.pl"
);

TEXT(beginproblem());

#  Allow for the user to try another version of the problem once they get it correct.
ProblemRandomize(when=>"Correct",onlyAfterDue=>0);

# Show which answers are correct and which ones are incorrect
$showPartialCorrectAnswers = 0;

##############################################################
#  Setup

$refreshCachedImages=1;

@eje = ("\(x\)", "\(y\)");
$index = random(0,1,1);

Context("Point");
$A = Point(random(-9,9,1),random(-9,9,1));
$B = Point(random(-9,9,1),random(-9,9,1));

#Extrayendo coordenadas de A, no se usa en este problema
($aA, $bA) = $A->value;
($aB, $bB) = $B->value;

$gr = init_graph(-10,-10,10,10,axes=>[0,0],grid=>[10,10],size=>[450,450]);

# adicionando los dos puntos
$gr->stamps( closed_circle($aA, $bA, 'blue') );
$gr->stamps( closed_circle($aB, $bB, 'red') );

# adicionandole etiquetas a los puntos
$gr->lb(new Label($aA+0.1,$bA+.6,'A','blue','center','middle'));
$gr->lb(new Label($aB+0.1,$bB+.6,'B','red','center','middle'));

#creando las opciones (puntos)

$opcion1 = ($A-$B)/2;
$opcion2 = ($B-$A)/2;
$opcion3 = -($A+$B)/2;
$opcion4 = $A;
$opcion5 = $B;
$answer = ($A+$B)/2;

$radio = RadioButtons(
   [ 
     "$answer",
     "$opcion1",
     "$opcion2",
     "$opcion3",
     "$opcion4",
     "$opcion5",
      "Ninguna de estas" ],
     "$answer",                     # correct answer
     last => ["Ninguna de estas"],   # can be a list
);

##############################################################
#
#  Text
#

Context()->texStrings;
BEGIN_TEXT
$BCENTER
\{  image(insertGraph($gr),width=>200,height=>200,tex_size=>450 ) \}
$BR
$BR
(Click en la gráfica para agrandar)
$ECENTER
$BR
Dado que \( (a,b) \) es el punto medio de los dos puntos mostrados en la gráfica anterior. Encuentre \( (a,b) \).
$BR
$BR
\{ $radio->buttons() \}
END_TEXT
Context()->normalStrings;

##############################################################
#  Answers
#

install_problem_grader(~~&std_problem_grader);

$showPartialCorrectAnswers = 0;

ANS( $radio->cmp() );

Context()->texStrings;
SOLUTION(EV3(<<'END_SOLUTION'));
El punto medio del segmento que une los puntos \( (x_1,y_1) \) y \( (x_2,y_2) \) se define por:
\[
  M = \left(  \frac{x_1+x_2}{2}, \frac{y_1+y_2}{2} \right),
\]
luego para los puntos \($A\) y \($B\) se tiene que:
\[
  M = \left(  \frac{$aA+$aB}{2}, \frac{$bA+$bB}{2} \right) = $answer
\]
END_SOLUTION
Context()->normalStrings;

ENDDOCUMENT();