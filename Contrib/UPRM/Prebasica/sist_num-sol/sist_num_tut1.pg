#  DESCRIPTION
#
#  Tipo: Falso/Cierto
#  Sistemas de numeración: dado un número real, decir si es entero, racional, irracional o no.

#  Problema WeBWork escrito por Edwin Florez, 
#  <edwin.florez (at) upr (dot) edu>
#
#  Adaptado desde el sistema quiz.uprm.edu del archivo
#  pedro_prebasica/sist_num-sol/sist_num_tut1.db
#
#  ENDDESCRIPTION

## DBsubject(Prebasica)
## DBchapter(Sistemas de numeración)
## DBsection(Conjuntos numéricos )
## Level(1)
## KEYWORDS('racional','entero','irracional','numeros')
## Author(Edwin Florez)
## Institution(UPRM)
## Language(es)

DOCUMENT();

loadMacros(
"PGstandard.pl",
"MathObjects.pl",
"PGgraphmacros.pl",
"contextInequalities.pl",
"AnswerFormatHelp.pl",
"PGchoicemacros.pl",
"contextFraction.pl",
"problemRandomize.pl",
"PGpolynomialmacros.pl",
"unionTables.pl",
"parserImplicitEquation.pl"
);

TEXT(beginproblem());
#$refreshCachedImages = 1;

#  Allow for the user to try another version of the problem once they get it correct.
ProblemRandomize(when=>"Correct",onlyAfterDue=>0);

# Show which answers are correct and which ones are incorrect
#$showPartialCorrectAnswers = 0;

##############################################################
#  Setup

#Se elegirá el número entero, racional o irracional usando la variable
#aleatoria $prob

$prob = random(0,2);
if ( $prob == 0 ){                                   #tipo 0: entero
  
   $r = random(-1000,1000);
   
   $explica = "Los enteros se definen como el conjunto \( \mathbb{Z} = \{ \ldots,-3,-2,-1,0,1,2,3,4,\ldots \}  \), y \($r\) pertenece a este conjunto. ";

}elsif( $prob == 1){                               #tipo 1: racional de dos tipos, decimal o fracción
  
   $explica = "El conjunto de los números racionales se define como \( \mathbb{Q} = \{ x = \frac{p}{q} \mid p, q \in \mathbb{Z}, \text{ y } q\ne 0\} \). O equivalentemente, aquellos números decimales cuya parte decimal es finita o  periódica. ";
  
 #eligiendo numerador "a" y denominador "b" diferentes 
 $a = random(-50,50);
  do{
    #$b = non_zero_random(-50,50);
    $b = list_random(2, 3, 5, 7, 11, 13, 37, 41);
  }until ( gcd($b,$a) == 1 && $a != $b);
  
  #eligiendo si este racional será fracción o decimal
  $frac = random(0,1);
  if ( $frac == 0 ){
    Context("Numeric");
    $r = $a/$b; 
    $r = $r."...";
    $equi_r = "\frac{$a}{$b}";
    $adic_explica = "En este caso \( $r = $equi_r \) pertenece a este conjunto pues es un decimal finito o infinito periódico y se puede escribir en forma de fracción. ";
  }else{
    $r = "\frac{$a}{$b}";
    $equi_r = $a/$b;
    $equi_r = $equi_r."...";
    $adic_explica = "En este caso \($r\) pertenece a este conjunto pues claramente es fracción de dos enteros. ";
  }

 $explica = $explica.$adic_explica;
 
}else{                                              #tipo 2: irracional de tres tipos, decimal,  raiz cuadrada de primo o con ope
  
   $explica = "El conjunto de los números irracionales se define como \( \mathbb{I} = \{ x \ne \frac{p}{q} \mid p, q \in \mathbb{Z}, \text{ y } q\ne 0\} \), es decir aquellos que no se pueden escribir en forma de fracción. Se debe tener cuidado pues muchas veces verificar que un número es irracional puede ser muy complicado. "; 
 
  $irra = random(0,2);
  if ( $irra == 0 ){
    $fix = random(2,9);
    $rep = random(0,1);
    $p_int = random(-100,100); 
    
    #adicionando la parte entera a la cadena
    $cadena = $p_int.".";
    foreach my $i (0..5){
      
     $cadena = $cadena.$fix;
      foreach my $j (0..$i){
        $cadena = $cadena.$rep;
      }
    
    }
    $r = $cadena."...";
    $adic_explica = "En este caso \($r\) pertenece a este conjunto pues su parte decimal, aunque tiene un patrón, nunca tendrá periodo. Se puede demostrar que no es escribible en forma de fracción. ";
 
   }elsif( $irra == 1 ){
   
   $a = list_random(2, 3, 5, 7, 11, 13, 17, 19, 23);
   $r = "\sqrt{ $a }";
   $adic_explica = "En este caso \($r\) pertenece a este conjunto pues se puede probar que la raíz de un entero que no es un cuadrado perfecto es siempre irracional. ";
  
  }else{
    
    $a = list_random(2, 3, 5, 7, 11, 13, 17, 19, 23);
    $b = list_random("\pi", "e", "\sqrt{$a}");
    $c = random(1,9);
    if ( random(0,1) == 0){
       $r = "\frac{$c}{\sqrt{$a}}";
    }else{
       $r = "\frac{$b}{$c}";
    }
  
  $adic_explica = "En este caso \($r\) pertenece a este conjunto pues se puede probar que la división entre irracionales y racionales diferentes de cero son siempre irracionales. ";
  }

  $explica = $explica.$adic_explica;
}

#cambiando el tipo y el valor de verdad para tener más variedad del ejercicio
if ( $prob == 0){  #recibiendo un entero
   
 $check = random(0,2);
  if ( $check == 0 ){
     $tipo = "entero";
     $answer = "C";
     $explica = $explica."Por lo tanto el enunciado es CIERTO.";
  }elsif( $check == 1 ){
    $tipo = "racional";
    $answer = "C"; 
    $explica = $explica."Todo número entero también es racional. Por lo tanto el enunciado es CIERTO.";
 }else{
    $tipo = "irracional";
    $answer = "F"; 
    $explica = $explica."También, todo número entero es racional y el conjunto de los racionales es disjunto con el conjunto de los irracionales. Por lo tanto el enunciado es FALSO.";
 }

}elsif( $prob == 1 ){ #recibiendo un racional 
 
 $check = random(0,2);
  if ( $check == 0 ){
     $tipo = "racional";
     $answer = "C"; 
     $explica = $explica."Por lo tanto el enunciado es CIERTO.";
  }elsif( $check == 1 ){
    $tipo = "entero";
    $answer = "F"; 
    $explica = $explica."Esta fracción no se puede reducir a un entero, por lo tanto el enunciado es FALSO.";
 }else{
    $tipo = "irracional";
    $answer = "F"; 
    $explica = $explica."Los irracionales son un conjunto disjunto con los racionales, por lo tanto el enunciado es FALSO.";
 }

}else{ #recibiendo un irracional
 
 $check = random(0,2);
  if ( $check == 0 ){
     $tipo = "irracional";
     $answer = "C"; 
     $explica = $explica."Por lo tanto el enunciado es CIERTO.";
  }elsif( $check == 1 ){
    $tipo = "racional";
    $answer = "F"; 
    $explica = $explica." También, los racionales son un conjunto disjunto con los irracionales, por lo tanto el enunciado es FALSO.";
 }else{
    $tipo = "entero";
    $answer = "F"; 
    $explica = $explica." También, los racionales son un conjunto disjunto con los irracionales, y todo entero es racional, por lo tanto el enunciado es FALSO.";
 }

}

## Set up a true-false list by creating a new select list object.
## $tf_list_ptr points to a new select list object.
$tf_list_ptr = new_select_list();

## Now assign to the true-false list object an array of
## "question", "answer" pairs from which a subset will be selected.
##
$tf_list_ptr -> qa (
"\( $r \) es un número $tipo.","$answer",
);

## Choose one of the possible question-answer pairs
$tf_list_ptr -> choose(1);

##############################################################
#
#  Text
#

Context()->texStrings;
BEGIN_TEXT
Determine si la siguiente proposición es cierta o falsa. Entre $BBOLD C $EBOLD para  cierta o $BBOLD F $EBOLD para falsa.
\{ $tf_list_ptr -> print_q \}
END_TEXT
Context()->normalStrings;

#Context("Numeric");
##############################################################
#  Answers
#

ANS( str_cmp( $tf_list_ptr->ra_correct_ans ) ) ;

Context()->texStrings;
SOLUTION(EV3(<<'END_SOLUTION'));
$explica
END_SOLUTION
Context()->normalStrings;

ENDDOCUMENT();