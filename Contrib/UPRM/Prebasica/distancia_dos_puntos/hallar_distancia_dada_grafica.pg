#  DESCRIPTION
#
#  Tipo: respuesta corta
#  Dados dos puntos en una gráfica encontrar su distancia.
#
#  Problema WebWork escrito por Edwin Florez, 
#  <edwin.florez (at) upr (dot) edu>
#
#  Adaptado desde el sistema quiz.uprm.edu del archivo
#  pedro_prebasica/distancia_dos_puntos/hallar_distancia_dada_grafica.db
#
#  ENDDESCRIPTION

## DBsubject(Prebasica)
## DBchapter(Plano cartesiano)
## DBsection(Distancia entre puntos)
## Level(1)
## KEYWORDS('grafica', 'puntos','plano','coordenadas','distancia')
## Author(Edwin Florez)
## Institution(UPRM)
## Language(es)

DOCUMENT();

loadMacros(
"PGstandard.pl",
"MathObjects.pl",
"PGgraphmacros.pl",
"problemRandomize.pl",
"AnswerFormatHelp.pl"
);

TEXT(beginproblem());
$refreshCachedImages = 1;

#  Allow for the user to try another version of the problem once they get it correct.
ProblemRandomize(when=>"Correct",onlyAfterDue=>0);

# Show which answers are correct and which ones are incorrect
$showPartialCorrectAnswers = 0;

Context("Point");
$A = Point(random(-9,9,1),random(-9,9,1));
$B = Point(random(-9,9,1),random(-9,9,1));

#Extrayendo coordenadas de A y B
($aA, $bA) = $A->value;
($aB, $bB) = $B->value;

$gr = init_graph(-10,-10,10,10,axes=>[0,0],grid=>[10,10],size=>[450,450]);

# adicionando los dos puntos
$gr->stamps( closed_circle($aA, $bA, 'blue') );
$gr->stamps( closed_circle($aB, $bB, 'red') );

# adicionandole etiquetas a los puntos
$gr->lb(new Label($aA+0.1,$bA+.6,'A','blue','center','middle'));
$gr->lb(new Label($aB+0.1,$bB+.6,'B','red','center','middle'));

$d = sqrt( ($aA-$aB)**2 + ($bA-$bB)**2);

$answer = Compute("$d");

$dx = $aA-$aB;
$dy = $bA-$bB;

BEGIN_TEXT
$BCENTER
\{  image(insertGraph($gr),width=>200,height=>200,tex_size=>450 ) \}
$BR
$BR
(Click en la gráfica para agrandar)
$ECENTER
$BR
Encuentre la distancia entre los dos puntos mostrados en la gráfica anterior. 
$PAR
$BBOLD(Entre su respuesta con al menos tres cifras decimales usando redondeo de ser necesario)$EBOLD
$BR
$BR
\(d(A,B)=\)  \{ans_rule(30)\} \{ AnswerFormatHelp("number") \}
END_TEXT

ANS( $answer->cmp(tolType => 'absolute', tolerance => .001 ) );

Context()->texStrings;
SOLUTION(EV3(<<'END_SOLUTION'));
El triángulo rectángulo que se usa para conseguir la distancia tiene vértices \( ($aA,$bA), ($aB,$bA)\) y \( ($aB,$bB) \). La distancia de los dos catetos son:
$BR
\[
\begin{align*}
  \phantom{bla}\text{Cateto horizontal} &= |$aA-$aB| = |$dx|\\[0.3cm]
  \phantom{bla}\text{Cateto vertical}     &= |$bA-$bB|  = |$dy|
\end{align*}
\]
La distancia entre \( ($aA,$bA) \) y \( ($aB,$bB) \) es igual a la hipotenusa. Usando el Teorema de Pitágoras tenemos que:
\[
d(A,B)^2 = ($dx)^2+($dy)^2,
\]
resolviendo para la distancia tenemos
\[
\begin{align*}
 d(A,B) &= \sqrt{($dx)^2+($dy)^2}, \\[.3cm]
             &= $answer
\end{align*}
\]
Por lo tanto la respuesta es: $answer
END_SOLUTION
Context()->normalStrings;

ENDDOCUMENT();