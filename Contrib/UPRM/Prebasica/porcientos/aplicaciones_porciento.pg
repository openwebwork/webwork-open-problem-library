#  DESCRIPTION
#
#  Tipo: respuesta corta
#  Porcientos: problemas de aplicación

#  Problema WeBWork escrito por Edwin Florez, 
#  <edwin.florez (at) upr (dot) edu>
#
#  Adaptado desde el sistema quiz.uprm.edu del archivo
#  pedro_prebasica/porcientos/aplicaciones_porciento.db
#
#  ENDDESCRIPTION

## DBsubject(Prebasica)
## DBchapter(Porcientos)
## DBsection(Aplicación)
## Level(1)
## KEYWORDS('porcientos','porcentajes','aplicacion')
## Author(Edwin Florez)
## Institution(UPRM)
## Language(es)

DOCUMENT();

loadMacros(
"PGstandard.pl",
"MathObjects.pl",
"PGgraphmacros.pl",
"contextInequalities.pl",
"AnswerFormatHelp.pl",
"PGchoicemacros.pl",
"contextFraction.pl",
"problemRandomize.pl",
"PGpolynomialmacros.pl"
);

TEXT(beginproblem());
#$refreshCachedImages = 1;

#  Allow for the user to try another version of the problem once they get it correct.
ProblemRandomize(when=>"Correct",onlyAfterDue=>0);

# Show which answers are correct and which ones are incorrect
#$showPartialCorrectAnswers = 0;

##############################################################
#  Setup

@nombre = ("Luis","Andrea","Mario","Cydmary","Domingo","Karen","Eliseo");
$index = random(0,6);

$prob = random(0,4);

if ( $prob == 0 ){
  
  $n =  random(2,40);                   #porciento
  $a =  $n*random(30,250);        #porcentaje
  $b =  $a*100/$n;                        #valor inicial
  $enunciado = "$n% de los empleados de un almacén se reportaron enfermos durante el primer cuatrimestre del año. Si $a empleados se reportaron enfermos, ¿cuántos empleados hay en el almacén?";
  $variables_conocidas = "a = $a \quad \text{y} \quad n = $n";
  $var_preg = "b";
  $answer = Compute($b);
  $sustituyendo = "
   \begin{align*}
      $a  &= \frac{$n}{100}\cdot b \\[0.2cm]
         b &= \frac{100 \times $a}{$n}
    \end{align*}"; 

}elsif(  $prob == 1 ){
  
  $n = random(2,40);                    
  $a = $n*random(2,25);              
  $b = $a*100/$n;                         
  $enunciado = "$nombre[$index] fue a cenar al restaurante Sancho Panza y dejó una propina de $a dólares  para la cena que costó $b dólares. ¿Qué porcentaje del total de la factura dejó $nombre[$index] de propina? (No escriba el símbolo %) ";
  $variables_conocidas = "a = $a \quad \text{y} \quad b = $b";
  $var_preg = "n";
  $answer = Compute($n);
  $sustituyendo = "
   \begin{align*}
      $a  &= \frac{n}{100}\cdot $b \\[0.2cm]
         n &= \frac{100 \times $a}{$b}
    \end{align*}"; 

}elsif(  $prob == 2 ){

  $n = list_random(2, 4, 5, 10, 20,  25, 50);    
  $a = random(5,15);                                          
  $b = $a*100/$n;                                               
  $enunciado = "$n% de los estudiantes en una clase son mujeres. Si el total de los estudiantes en la clase es $b, ¿cuántas mujeres hay en la clase?";
   $variables_conocidas = "b = $b \quad \text{y} \quad n = $n";
   $var_preg = "a";
   $answer = Compute($a);
   $sustituyendo = "a  = \frac{$n}{100}\cdot $b"; 

}elsif(  $prob == 3 ){

  $n = random(2,40);                        
  $a = $n*random(200,1000);         
  $b = $a*100/$n;                     
  $enunciado = "$nombre[$index] gana $b en la lotería y le quiere regalar a su padre el $n% del premio. ¿Cuánto dinero le regaló $nombre[$index] a su padre? (No escriba el símbolo de dolar)";
  $variables_conocidas = "b = $b \quad \text{y} \quad n = $n";
  $var_preg = "a";
  $answer = Compute($a);
  $sustituyendo = "a  = \frac{$n}{100}\cdot $b"; 

}else{

  $n = list_random(2, 4, 5, 10, 20,  25, 50);    
  $a = random(5,15);                                          
  $b = $a*100/$n;                                      
  $enunciado = "$n% de los estudiantes en una clase son hombres. Si el total de los estudiantes en la clase es $b, ¿cuántos hombres hay en la clase?";
  $variables_conocidas = "b = $b \quad \text{y} \quad n = $n";
  $var_preg = "a";
  $answer = Compute($a);
   $sustituyendo = "a  = \frac{$n}{100}\cdot $b"; 

}
##############################################################
#
#  Text
#

Context()->texStrings;
BEGIN_TEXT
$enunciado
$PAR
\($var_preg = \) \{ans_rule(20)\} \{ AnswerFormatHelp("number") \}
END_TEXT
Context()->normalStrings;

#Context("Numeric");
##############################################################
#  Answers
#

ANS( $answer->cmp() );

Context()->texStrings;
SOLUTION(EV3(<<'END_SOLUTION'));
$BBOLD Paso 1:$EBOLD Escriba la fórmula e identificar variables:
\[
\begin{align*}
 \text{Fórmula: }   & a = \frac{n}{100}\cdot b \\[0.3cm]
 \text{Variables: } & $variables_conocidas
\end{align*}
\]
$PAR
$BBOLD Paso 2:$EBOLD Sustituir valores en la fórmula y determinar valor desconocido:
$PAR
\[
  $sustituyendo
\]
por lo tanto la solución es \( $answer \).
END_SOLUTION
Context()->normalStrings;

ENDDOCUMENT();