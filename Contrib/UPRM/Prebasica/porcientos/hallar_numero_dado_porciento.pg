#  DESCRIPTION
#
#  Tipo: respuesta corta
#  Porciento: calcular una de las variables vf = p*vi, dadas las otras dos.

#  Problema WeBWork escrito por Edwin Florez, 
#  <edwin.florez (at) upr (dot) edu>
#
#  Adaptado desde el sistema quiz.uprm.edu del archivo
#  pedro_prebasica/porcientos/hallar_numero_dado_porciento.db
#
#  ENDDESCRIPTION

## DBsubject(Prebasica)
## DBchapter(Porcientos)
## DBsection(Problemas)
## Level(1)
## KEYWORDS('porcientos','porcentajes')
## Author(Edwin Florez)
## Institution(UPRM)
## Language(es)

DOCUMENT();

loadMacros(
"PGstandard.pl",
"MathObjects.pl",
"PGgraphmacros.pl",
"contextInequalities.pl",
"AnswerFormatHelp.pl",
"PGchoicemacros.pl",
"contextFraction.pl",
"problemRandomize.pl",
"PGpolynomialmacros.pl"
);

TEXT(beginproblem());
#$refreshCachedImages = 1;

#  Allow for the user to try another version of the problem once they get it correct.
ProblemRandomize(when=>"Correct",onlyAfterDue=>0);

# Show which answers are correct and which ones are incorrect
#$showPartialCorrectAnswers = 0;

##############################################################
#  Setup

Context("Numeric");

$valor_inicial = random(20,1000,5);
$porcentaje = random(1,150);
$valor_final = $valor_inicial*$porcentaje/100;

@preguntas = (
 "Determine el \($porcentaje\)% de \( $valor_inicial \).", 
 "Si \( $valor_final \) es el \($porcentaje\)% de \(b\), calcule el valor de \(b\).",
 "Si \($valor_final\) es el \(n\)% de \( $valor_inicial \), calcule el valor de \(n\)."
);
   
#Eligiendo pregunta, preparando respuesta. 
$index = random(0,2);

if ($index == 0){
  $answer = Compute($valor_final);
  $var_preg = "a";
  $variables_conocidas = "b = $valor_inicial\quad\text{y}\quad n = $porcentaje";
  $sustituyendo = "a = \frac{$porcentaje}{100}\cdot $valor_inicial";
}elsif($index == 1){
  $answer = Compute($valor_inicial);
  $var_preg = "b";
  $variables_conocidas = "a = $valor_final\quad\text{y}\quad n = $porcentaje";
  $sustituyendo = "
   \begin{align*}
      $valor_final &= \frac{$porcentaje}{100}\cdot b \\[0.2cm]
                        b &= \frac{$valor_final \times 100}{$porcentaje}
    \end{align*}"; 
}else{
  $answer = Compute($porcentaje);
  $var_preg = "n";
  $variables_conocidas = "a = $valor_final\quad\text{y}\quad b = $valor_inicial";
  $sustituyendo = "
     \begin{align*}
      $valor_final &= \frac{n}{100} \cdot $valor_inicial \\[0.2cm]
                        n &= \frac{$valor_final \times 100}{ $valor_inicial}
     \end{align*}";
}

##############################################################
#
#  Text
#

Context()->texStrings;
BEGIN_TEXT
$preguntas[$index]
$PAR
\($var_preg =\) \{ans_rule(20)\} \{ AnswerFormatHelp("number") \}
END_TEXT
Context()->normalStrings;

#Context("Numeric");
##############################################################
#  Answers
#

ANS( $answer->cmp(studentsMustReduceFractions=>1) );

Context()->texStrings;
SOLUTION(EV3(<<'END_SOLUTION'));
$BBOLD Paso 1:$EBOLD Escriba la f贸rmula e identificar variables:
\[
\begin{align*}
 \text{F贸rmula: }   &a = \frac{n}{100}\cdot b \\[0.3cm]
 \text{Variables: } & $variables_conocidas
\end{align*}
\]
$PAR
$BBOLD Paso 2:$EBOLD Sustituir valores en la f贸rmula y determinar valor desconocido:
$PAR
\[
  $sustituyendo
\]
por lo tanto la soluci贸n es \( $answer \).
END_SOLUTION
Context()->normalStrings;

ENDDOCUMENT();