#  DESCRIPTION
#
#  Tipo: respuesta corta
#  Dada una desigualdad, encontrar el intervalo solución. 

#  Problema WebWork escrito por Edwin Florez, 
#  <edwin.florez (at) upr (dot) edu>
#
#  Adaptado desde el sistema quiz.uprm.edu del archivo
#  pedro_prebasica/desigualdades_lineales_una_variable/resuelva_desigualdades_una_variable.db
#
#  ENDDESCRIPTION

## DBsubject(Prebasica)
## DBchapter(Desigualdades)
## DBsection(Solucion)
## Level(1)
## KEYWORDS('desigualdades','solucion','intervalos')
## Author(Edwin Florez)
## Institution(UPRM)
## Language(es)

DOCUMENT();

loadMacros(
"PGstandard.pl",
"MathObjects.pl",
"PGgraphmacros.pl",
"contextInequalities.pl",
"PGchoicemacros.pl",
"contextFraction.pl",
"problemRandomize.pl",
"contextFraction.pl",
"AnswerFormatHelp.pl"
);

TEXT(beginproblem());
$refreshCachedImages = 1;

#  Allow for the user to try another version of the problem once they get it correct.
ProblemRandomize(when=>"Correct",onlyAfterDue=>0);

# Show which answers are correct and which ones are incorrect
$showPartialCorrectAnswers = 0;

##############################################################
#  Setup

$a = non_zero_random(-9,9);
$b = $a*non_zero_random(-9,9);
$c = $a*random(-30,30);

$x = Compute("($c-$b)/$a");

@simbolo = ("<", ">","\leq","\geq");
$index = random(0,3);

#Usado para crear la tabla en la solución
$f = Formula("$a x + $b");
$x1 = $x-1;
$x2 = $x+1;
$y1 = $f->eval(x=>$x1);
$y2 = $f->eval(x=>$x2);

#if ( $y1 < $c) {
#  $valorVerdad1 = "Verdadero";
#}else{
#  $valorVerdad1 = "Falso"; 
#}
#
#if ( $y2 <$c) {
#  $valorVerdad2 = "Verdadero";
#}else{
#  $valorVerdad2 = "Falso"; 
#}
##### Termina la tabla

#La respuesta
Context("Inequalities");
if ($index == 0){
   $answer = Interval( "(-inf,$x)" );
}elsif($index == 1){
   $answer = Interval( "($x,inf)" );
}elsif($index == 2){
   $answer = Interval( "(-inf,$x]" );
}else{
   $answer = Interval( "[$x,inf)" );
}

#Haciendo la representación gráfica
$gr = init_graph($x-5,-2,$x+5,2, size=>[600,100]);

#Dibujando el eje horizontal
$gr -> moveTo($x-5,0);
$gr -> lineTo($x+5,0,'blue','1');

$gr -> moveTo($x,0);
$gr -> lineTo($x+5,0,'green','1');

#Dibujando los separadores
$gr -> h_ticks(0,"black",$x-4,$x-3,$x-2,$x-1,$x,$x+1,$x+2,$x+3,$x+4);

# Etiquetando los separadores
foreach my $j (-4..4) { 
  $gr->lb( new Label($x + $j,-0.5,$x + $j, 'black','center','middle'));
}

#Punto de division de la recta y su etiqueta
$gr -> stamps( closed_circle($x,0.0,'blue') );
$gr->lb(new Label($x,0.5,'x','blue','center','middle'));

##############################################################
#
#  Text
#

BEGIN_TEXT
Resolver la desigualdad
\[
$a x + $b $simbolo[$index] $c
\]
$BBOLD(Escriba el resultado en notación de intervalo)$EBOLD.
$PAR
\{ ans_rule(20) \} \{ AnswerFormatHelp("intervals") \}
END_TEXT

#Context("Numeric");
Context()->normalStrings;
##############################################################
#  Answers
#

ANS( $answer->cmp ) ;

SOLUTION(EV3(<<'END_SOLUTION'));
$BBOLD Paso 1:$EBOLD Resolver la ecuación \($a x + $b = $c\). Entonces \(x = $x\).
$PAR
$BBOLD Paso 2:$EBOLD Dividir la recta usando \(x = $x\) como frontera:
$PAR
$BCENTER
\{ image(insertGraph($gr), width=>300, height=>50, tex_size=>320); \}
$PAR
(Click en la gráfica para agrandar)
$PAR
$ECENTER
$PAR
$BBOLD Paso 3:$EBOLD Determinar el intervalo que nos interesa seleccionando un punto de prueba de cada intervalo:
\[
\begin{array}{|c|c|}
\hline
\text{Izquierda} & \text{Derecha} \\ \hline
x=$x1   & x = $x2 \\ \hline
$a\cdot ($x1) +$b $simbolo[$index] $c & $a\cdot ($x2) +$b $simbolo[$index] $c \\ \hline
$y1 $simbolo[$index] $c & $y2 $simbolo[$index] $c \\ \hline
\end{array}
\]
$PAR
Por lo tanto la solución es \($answer\).
END_SOLUTION

ENDDOCUMENT();