#  DESCRIPTION
#
#  Tipo: respuesta corta
#  Problema que pregunta por la ecuacion de una recta 
# dado algunos puntos sobre ella.
#
#  Problema WebWork escrito por Edwin Florez, 
#  <edwin.florez (at) upr (dot) edu>
#
#  Adaptado desde el sistema quiz.uprm.edu del archivo
#  pedro_prebasica/ecuaciones_lineales_2_variables_parte_1/formula_para_relaciones_lineales.db
#
#  ENDDESCRIPTION

## DBsubject(Prebasica)
## DBchapter(Ecuaciones lineales)
## DBsection(Forma y=mx+b)
## Level(1)
## KEYWORDS('lineal','pendiente')
## Author(Edwin Florez)
## Institution(UPRM)
## Language(es)

DOCUMENT();

loadMacros(
"PGstandard.pl",
"MathObjects.pl",
"AnswerFormatHelp.pl",
"problemRandomize.pl"
);

TEXT(beginproblem());

#  Allow for the user to try another version of the problem once they get it correct.
ProblemRandomize(when=>"Correct",onlyAfterDue=>0);

# Show which answers are correct and which ones are incorrect
$showPartialCorrectAnswers = 0;


Context("Numeric");

$m = random(-3,3,1);
$b = random(-9,9,1);
$answer = Formula("$m x + $b")->reduce;

@x = ();
@y = ();
foreach my $i (0..2) {
  $x[$i] = random(-9+$i*6,-9+($i+1)*6,1);
  $y[$i] = $answer->eval( x=>$x[$i]);
}

Context()->texStrings;
BEGIN_TEXT
Dada la siguiente tabla de valores
$PAR
\[ \begin{array}{|c|c|c|c|c|c|}
\hline
x = & $x[0] & $x[1] & $x[2] \\ \hline
y = & $y[0] & $y[1] & $y[2] \\ \hline
\end{array}\] 
$PAR
encuentre la ecuación de la línea recta en la forma \(y = mx+b\)  que corresponde a los valores anteriores.
$BR
$BR
\(y = \) \{ans_rule(10)\}
\{ AnswerFormatHelp("formula") \}
END_TEXT
Context()->normalStrings;

ANS( $answer->cmp());

Context()->texStrings;
SOLUTION(EV3(<<'END_SOLUTION'));
Debemos encontrar la ecuación de la línea recta en la forma \(y=mx+b\), donde \(m\) es la pendiente y \(b\) es el punto de corte de la línea recta con el eje \(y\).
$PAR 
$BBOLD Paso 1$EBOLD: Calcular el valor de la pendiente. Dados dos puntos \((x_1,y_1)\) y \((x_2,y_2)\) tenemos que 
\[
m = \frac{y_2-y_1}{x_2-x_1}.
\]
Tenemos tres puntos \( ($x[0],$y[0]),  ($x[1],$y[1])\) y \(($x[2],$y[2])\). Sin pérdida de generalidad, seleccionamos \( ($x[0],$y[0]) \) y \( ($x[1],$y[1]) \).  
\[
m = \frac{$y[1]-$y[0]}{$x[1]-$x[0]}=$m.
\]
Entonces la pendiente \(m = $m\).
$PAR 
$BBOLD Paso 2$EBOLD:  Encontrar el valor de \(b\). Utilizamos la fórmula \(y=mx+b\), la pendiente \(m=$m\) y un punto \((x_0,y_0)\) que pase por la recta. Sin pérdida de generalidad, se utiliza el punto \(($x[2],$y[2])\). Entonces 
\begin{align*}
$y[2] &= $m\cdot $x[2] + b \\
         b&= $b
\end{align*}
La solución es \(y = ($m) x + ($b) = $answer\).
END_SOLUTION

Context()->normalStrings;

ENDDOCUMENT();