#  DESCRIPTION
#
#  Tipo: respuesta corta
#  Orden de operaciones: dada una exp tipo a+b[ c+(d+e*f)^n ] + [g^m - (h+i)], encontrar el resultado. 
#
#  Problema WebWork escrito por Edwin Florez, 
#  <edwin.florez (at) upr (dot) edu>
#
#  Adaptado desde el sistema quiz.uprm.edu del archivo
#  pedro_prebasica/order_de_operaciones_numericas/operaciones_combinadas.db
#
#  ENDDESCRIPTION

## DBsubject(Prebasica)
## DBchapter(Sistemas numéricos)
## DBsection(Orden de operaciones)
## Level(1)
## KEYWORDS('operaciones', 'numeros', 'orden')
## Author(Edwin Florez)
## Institution(UPRM)
## Language(es)

DOCUMENT();

loadMacros(
"PGstandard.pl",
"MathObjects.pl",
"PGgraphmacros.pl",
"AnswerFormatHelp.pl",
"problemRandomize.pl",
"contextLimitedNumeric.pl"
);

TEXT(beginproblem());
#$refreshCachedImages = 1;

#  Allow for the user to try another version of the problem once they get it correct.
ProblemRandomize(when=>"Correct",onlyAfterDue=>0);

# Show which answers are correct and which ones are incorrect
#$showPartialCorrectAnswers = 0;

#################
### Setup

#construyendo la exp. tipo a+b[ c-(d+e*f)^n ] +  [g^m - (h+i)]
$a = non_zero_random(-20,20);
$b = non_zero_random(-9,9);
$c = non_zero_random(-1000,1000);
$d = non_zero_random(-9,9);
$e = non_zero_random(-5,5);
$f =  random(2,5);
$n = random(2,4);
$g = random(2,5);
$m = random(2,4);
$h = non_zero_random(-9,9);
$i = non_zero_random(-9,9);

$r = $a + $b*( $c - ( $d + $e*$f)**$n ) + ($g**$m - ($h+$i));

#usado al presentar la solución
$multiplicacion1= $e*$f;
$suma_resta1 = $h + $i;
$suma_resta2 = $d + $multiplicacion1;

#$r = $a + $b*[ $c - ( $sr2)**$n ] + [$g**$m - $sr1];

$potencia1 = $suma_resta2**$n;
$potencia2 = $g**$m;
$suma_resta3 = $c -  $potencia1;
$suma_resta4 = $potencia2 - $suma_resta1;

#$r = $a + $b*$sr3  + $sr4;

$multiplicacion2 = $b*$suma_resta3;
$suma_resta5 = $a + $multiplicacion2 + $suma_resta4;

Context("Numeric");
Context("LimitedNumeric");

$answer = Compute($r);

Context()->texStrings;
BEGIN_TEXT
\[
 $a + $b\left[ $c - \left( $d + $e\times $f \right)^{$n} \right] + \left[ $g^{$m} + \left( $h + $i \right) \right]
\]
Efectúe las operaciones indicadas y obtenga el resultado para la expresión que se muestra arriba.
$PAR
Contestación: \{ans_rule(10)\} \{ AnswerFormatHelp("number") \}
END_TEXT
Context()->normalStrings;


ANS( $answer->cmp() );

Context()->texStrings;
SOLUTION(EV3(<<'END_SOLUTION'));
$BBOLD Paso 1:$EBOLD Resolver los paréntesis circulares:
$PAR
la multiplicación y la suma/resta
\[
 $a + $b\left[ $c - \left( $d + $e\times $f \right)^{$n} \right] + \left[ $g^{$m} + \left( $h + $i \right) \right] = 
 $a + $b\left[ $c - \left( $d + $multiplicacion1 \right)^{$n} \right] + \left[ $g^{$m} + $suma_resta1 \right]
\]
la suma y/o resta
\[
  $a + $b\left[ $c - \left( $d + $multiplicacion1 \right)^{$n} \right] + \left[ $g^{$m} + $suma_resta1 \right] = 
  $a + $b\left[ $c - \left( $suma_resta2 \right)^{$n} \right] + \left[ $g^{$m} + $suma_resta1 \right]
\]
$PAR
$BBOLD Paso 2:$EBOLD Resolver paréntesis cuadrados: 
$PAR
las potencias
\[
  $a + $b\left[ $c - \left( $suma_resta2 \right)^{$n} \right] + \left[ $g^{$m} + $suma_resta1 \right] = \
  $a + $b\left[ $c - $potencia1 \right] + \left[ $potencia2 + $suma_resta1 \right] = 
\]
las sumas y/o restas
\[
 $a + $b\left[ $c - $potencia1 \right] + \left[ $potencia2 + $suma_resta1 \right] = 
 $a + $b\times$suma_resta3  +  $suma_resta4 
\]
$PAR
$BBOLD Paso 3:$EBOLD Realizar la multiplicación:
\[
 $a + $b\times $suma_resta3  +  $suma_resta4  = 
 $a + $multiplicacion2  +  $suma_resta4 
\]
$PAR
$BBOLD Paso 4:$EBOLD Realizar la sumas y/o restas:
\[
$a + $multiplicacion2  +  $suma_resta4  = $suma_resta5
\]
$PAR
La solución es: \( $answer \).
END_SOLUTION
Context()->normalStrings;


ENDDOCUMENT();