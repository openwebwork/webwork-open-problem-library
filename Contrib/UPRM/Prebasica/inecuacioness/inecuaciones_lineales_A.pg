#  DESCRIPTION
#
#  Tipo: Seleccionar la correcta
#   Simplificar una inecuación lineal:  tipo ax + b [>,<=,>=] c. 
#
#  Problema WebWork escrito por Edwin Florez, 
#  <edwin.florez (at) upr (dot) edu>
#
#  Adaptado desde el sistema quiz.uprm.edu del archivo
#  pedro_prebasica/inecuacioness/inecuaciones_lineales.db
#
#  ENDDESCRIPTION

## DBsubject(Prebasica)
## DBchapter(Inecuaciones)
## DBsection(Simplificar)
## Level(1)
## KEYWORDS('inecuaciones')
## Author(Edwin Florez)
## Institution(UPRM)
## Language(es)

DOCUMENT();

loadMacros(
"PGstandard.pl",
"MathObjects.pl",
"PGgraphmacros.pl",
"AnswerFormatHelp.pl",
"problemRandomize.pl",
"contextLimitedNumeric.pl",
"parserRadioButtons.pl",
"contextInequalities.pl"
);

TEXT(beginproblem());
#$refreshCachedImages = 1;

#  Allow for the user to try another version of the problem once they get it correct.
ProblemRandomize(when=>"Correct",onlyAfterDue=>0);

# Show which answers are correct and which ones are incorrect
#$showPartialCorrectAnswers = 0;

#################
### Setup

#construyendo la exp. tipo ax + b [>,<,>=,<=] c
$a = non_zero_random(-9,9);
$b = $a*non_zero_random(-20,20);
do{
 $c = $a*non_zero_random(-20,20);
}until ($c != $b);

#eligiendo el tipo de desigualdad
@sim = (">","<","\geq","\leq");
$index = random(0,3);

#desigualdad contraria para la solucion
@sim_cont = ("<",">","\leq","\geq");

#Signo no TeX para Compute
if ($index == 0){
 $simbolo = ">";
 $simbolo_contrario = "<";
}elsif ( $index == 1 ){
 $simbolo = "<";
 $simbolo_contrario = ">";
}elsif ( $index == 2 ){
 $simbolo = ">=";
 $simbolo_contrario = "<=";
}else{
 $simbolo = "<=";
 $simbolo_contrario = ">=";
}

#Los valores absolutos de a y b
#en caso de ser necesarios
$abs_a = abs($a);
$abs_b = abs($b);

#valores temporales para la solución
$c_menos_b = $c - $b;
$b_menos_c = $b - $c;
$c_mas_b = $b + $c;

#Operación a realizarse en el primer paso de la solución
if ($b > 0){
 $ope = "Restamos";
 $sig = "-";
}else{
 $ope = "Sumamos";
 $sig = "+";
}


#la inecuación a preguntar
if ( $a == 1){
  $ineq = "x + $b $sim[$index] $c";
}elsif ($a == -1){
 $ineq = "-x + $b $sim[$index] $c";
}else{
  $ineq = "$a x + $b $sim[$index] $c";
}

#En caso que "a" sea negativo se necesita un  paso extra
#en la solución
if ( $a< 0 ){
 
 Context("Inequalities-Only");
 $r = Compute("x $simbolo_contrario $c_menos_b/$a")->TeX;
 $r1 = Compute("x $simbolo $c_menos_b/$a")->TeX;
 $r2 = Compute("x $simbolo_contrario $b_menos_c/$a")->TeX;
 $r3 = Compute("x $simbolo $b_menos_c/$a")->TeX;
 $r4 = Compute("x $simbolo $c_mas_b/$a")->TeX;
 
 #Diferenciando de a = -1 y a < -1
 if ($a == -1){ 
   
   $extra ="
     $BBOLD Paso 2:$EBOLD Eliminar el signo \(-\). Dividimos a ambos lados de la desigualdad 
     por \(-1\) y cambiar dirección de la desigualdad. 
     \[
      \frac{-x}{-1} $sim_cont[$index] \frac{$c_menos_b}{-1}  \quad \Rightarrow \quad  $r
     \]
   $PAR";

 }else{

   $extra ="
     $BBOLD Paso 2:$EBOLD Eliminar al $a de \(x\). Dividimos a ambos lados de la desigualdad 
     por \($a\) y cambiar dirección de la desigualdad. 
     \[
      \frac{$a x}{$a} $sim_cont[$index]  \frac{$c_menos_b}{$a}  \quad \Rightarrow \quad  $r
     \]
   $PAR";

 }

}else{
 
Context("Inequalities-Only");
 $r = Compute("x $simbolo $c_menos_b/$a")->TeX;
 $r1 = Compute("x $simbolo_contrario $c_menos_b/$a")->TeX;
 $r2 = Compute("x $simbolo $b_menos_c/$a")->TeX;
 $r3 = Compute("x $simbolo_contrario $b_menos_c/$a")->TeX;
 $r4 = Compute("x $simbolo $c_mas_b/$a")->TeX;
 
  if ($a > 1){ 
   
    $extra ="
     $BBOLD Paso 2:$EBOLD Eliminar al $a de \(x\). Dividimos a ambos lados de la desigualdad 
     por \($a\).
     \[
      \frac{$a x}{$a} $sim[$index]  \frac{$c_menos_b}{$a}  \quad \Rightarrow \quad  $r
     \]
   $PAR";
  
  }

}

$radio = RadioButtons(["\($r\)","\($r1\)","\($r2\)","\($r3\)","\($r4\)","Ninguna de las otras"], "\($r\)", 
     last => ["Ninguna de las otras"], 
     labels => "ABC"
  );

Context()->noreduce('y-x', '-(x+y)', '-(n)', '-(x*y)', 'y-x');
$ax = Formula("$a x")->reduce;

Context()->texStrings;
BEGIN_TEXT
El resultado de simplificar 
\[
$ineq
\]
es:
$PAR
\{ $radio->buttons() \}
END_TEXT
Context()->normalStrings;

install_problem_grader(~~&std_problem_grader);

$showPartialCorrectAnswers = 0;

ANS( $radio->cmp() );

Context()->texStrings;
SOLUTION(EV3(<<'END_SOLUTION'));
$BBOLD Paso 1:$EBOLD Eliminar $b. $ope $abs_b a ambos lados de la desigualdad:
\[
\begin{align*}
 $ax + $b $sig $abs_b &  $sim[$index] $c $sig $abs_b \\[0.2cm] 
                                 $ax & $sim[$index] $c_menos_b
\end{align*}
\]
$PAR
$extra La solución es: \( $r \).
END_SOLUTION
Context()->normalStrings;


ENDDOCUMENT();