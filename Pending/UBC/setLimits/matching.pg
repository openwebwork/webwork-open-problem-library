#DESCRIPTION
# Matching functions with graphs of their derivatives
#ENDDESCRIPTION


DOCUMENT();

loadMacros("PGbasicmacros.pl",
           "PGchoicemacros.pl",
           "PGanswermacros.pl",
	   "PGunion.pl",
           "imageChoice.pl",
           "PGgraphmacros.pl",        
);


TEXT(beginproblem());


$showPartialCorrectAnswers = 0;


# Change the domain and range of the graphs here
$domain = 4;
$range = 4;


$cf[0]= "x/(x^2+1)";
$cf[1]="x/(x^2-1)";
$cf[2]="1/(x^2-1)";
$cf[3]="x/(x-1)^2";
$cf[4]="1/(x-1)^2";
$cf[5]="x/(x+1)";

@f[0]= "x/(x^2+1)  for x in <-4,4> using color:red and weight:2";
@f[1]="x/(x^2-1)  for x in <-4,4> using color:red and weight:2";
@f[2]="1/(x^2-1)  for x in <-4,4> using color:red and weight:2";
@f[3]="x/(x-1)^2  for x in <-4,4> using color:red and weight:2";
@f[4]="1/(x-1)^2  for x in <-4,4> using color:red and weight:2";
@f[5]="x/(x+1)  for x in <-4,4> using color:red and weight:2";



@ALFA = ("A","B","C","D","E","F");

#Creates the Graphs of the original Functions
for my $i (0..5) 
{
  $gr[$i] = init_graph(-$domain,-$range,$domain,$range,
  'axes'=>[0,0],
  'grid'=>[9,9]);	
  plot_functions($gr[$i], $f[$i] );
 $gr[$i] -> lb(new Label ( 4,4,$ALFA[i],'black','right','top'));
}


@QA = ();
foreach my $i (0..5) { push( @QA, "f(x) = \($cf[$i]\)",  $gr[$i] ); }

$ml = new_image_match_list(
  link => 1,                #  do not link to separate image
  size => [200,200],        #  image size in pixels
  tex_size => 450,          #  tex size in precent times 10
  columns => 2,             #  number of columns
  separation => 20,         #  separation between image columns 
);

$ml->rf_print_q(~~&pop_up_list_print_q); # use pop-up-lists
$ml->ra_pop_up_list([ No_answer=>"?", A=>"A", B=>"B", C=>"C", D=>"D",E=>"E",F=>"F"] );

$ml->qa(@QA);             
$ml->choose(6);             
#$ml->choose_extra(0);     


BEGIN_TEXT
\{
ColumnTable(
"Match the graphs with the corresponding formulas.".
$ml->print_q() 
, # comma!
$BCENTER.
$ml->print_a().
$BR.
"(Click on a graph to enlarge it)".
$ECENTER
, # comma!
indent => 0, separation => 30, valign => "TOP"
)
\}
END_TEXT



install_problem_grader(~~&std_problem_grader);
$showPartialCorrectAnswers = 0;

ANS(str_cmp($ml->ra_correct_ans));

foreach my $i (0..5) {
  $a[$i] = $ml->ra_correct_ans->[$i];
}

BEGIN_SOLUTION
$PAR SOLUTION $PAR
The formulas match as follows: 
1 matches graph $a[0], $BR
2 matches graph $a[1], $BR
3 matches graph $a[2], $BR
4 matches graph $a[3], $BR
5 matches graph $a[4], and $BR
6 matches graph $a[5].
END_SOLUTION

ENDDOCUMENT();
